<!doctype html>
<html lang="en">
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta content='text/html; charset=utf-8' http-equiv='content-type' />

<meta name="generator" content="Hugo 0.120.3">

<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" rel="stylesheet">
<link href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" rel="stylesheet"/>
<style type="text/css">/*https://coolors.co/afd5aa-f0f2ef-a69f98-3d3d3d-8c6057*/
:root {
  --main-color: #8C6056; 
  --secondary-color: #AFD5AA;
  --logo-text-color: #fff;
  --body-text-color: #3d3d3d;
  --heading-text-color: #383838;
  --background-color: #fff;
}</style>
<link href='https://blog.dornea.nu/css/tachyons.min.css' rel="stylesheet">
<link href='https://blog.dornea.nu/css/styles.css' rel="stylesheet">
<link rel="stylesheet" href="https://blog.dornea.nu/css/custom.css">
<link rel="stylesheet" href="https://blog.dornea.nu/css/syntax.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" />
<script src="https://cdn.jsdelivr.net/gh/mcstudios/glightbox/dist/js/glightbox.min.js"></script>


<link rel="icon" 
 
  href='https://blog.dornea.nu/favicon.ico'

type="image/x-icon"/>

<link href='https://blog.dornea.nu/feed.xml' rel="alternate" type="application/atom+xml" title="blog.dornea.nu" />



<script src="https://beamanalytics.b-cdn.net/beam.min.js" data-token="b8a4b728-8eda-42fb-8376-10168c622160" async>

</script>

</head>
<body class="global-font">
  <nav class="fixed w-100 bg-white bb b--black-10" id="navbar" style="z-index: 9999;">
  <div class="content-width center flex flex-wrap justify-between items-center pa3">
    
    <div class="flex items-center">
      <a class="f4 fw6 ttu no-underline dim bg-main-color pv1 ph3 br2 white" id="site-title" href='https://blog.dornea.nu/' title="Home">blog.dornea.nu</a>
    </div>

    
    <div class="dn flex-l items-center">
      
        
          <a class="link dim dark-gray f6 dib ml4 ttu tracked fw5" href='https://blog.dornea.nu/' title="Home">Home</a>
        
          <a class="link dim dark-gray f6 dib ml4 ttu tracked fw5" href='http://dornea.nu' title="About">About</a>
        
          <a class="link dim dark-gray f6 dib ml4 ttu tracked fw5" href='https://blog.dornea.nu/feed.xml' title="RSS">RSS</a>
        
          <a class="link dim dark-gray f6 dib ml4 ttu tracked fw5" href='https://blog.dornea.nu/tags' title="Tags">Tags</a>
        
          <a class="link dim dark-gray f6 dib ml4 ttu tracked fw5" href='https://brainfck.org' title="Zettelkasten">Zettelkasten</a>
        
      
    </div>

    
    <div class="db dn-l">
      <button class="bg-transparent bn pointer dim" id="menu-toggle">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
    </div>
  </div>

  
  <div class="dn bg-white w-100 pa3 shadow-1" id="mobile-menu">
    
      
        <a class="link dim dark-gray f6 db pv2 ttu tracked fw5" href='https://blog.dornea.nu/' title="Home">Home</a>
      
        <a class="link dim dark-gray f6 db pv2 ttu tracked fw5" href='http://dornea.nu' title="About">About</a>
      
        <a class="link dim dark-gray f6 db pv2 ttu tracked fw5" href='https://blog.dornea.nu/feed.xml' title="RSS">RSS</a>
      
        <a class="link dim dark-gray f6 db pv2 ttu tracked fw5" href='https://blog.dornea.nu/tags' title="Tags">Tags</a>
      
        <a class="link dim dark-gray f6 db pv2 ttu tracked fw5" href='https://brainfck.org' title="Zettelkasten">Zettelkasten</a>
      
    
  </div>
</nav>


<div class="h3"></div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const menuToggle = document.getElementById('menu-toggle');
    const mobileMenu = document.getElementById('mobile-menu');
    
    menuToggle.addEventListener('click', function() {
      const expanded = mobileMenu.classList.contains('db');
      mobileMenu.classList.toggle('db');
      mobileMenu.classList.toggle('dn');
    });
  });
</script>

  
<main class="center mv4 content-width ph3">
  <div class="f3 fw6 heading-color heading-font post-title">HowTo: Have a web performance boost with Nginx</div>
  <p class="silver f6 mt1 mb4 post-meta">
    <time>26 Jan 2012</time> 
     | 
    

    
     ~
  

9 mins
|

    
    tags: [ <a href='https://blog.dornea.nu/tags/howto' class="link silver">howto</a> <a href='https://blog.dornea.nu/tags/nginx' class="link silver">nginx</a> <a href='https://blog.dornea.nu/tags/admin' class="link silver">admin</a>  ]
    

  </p>
  <div class="lh-copy post-content">
    

      <h2 id="why-nginx">Why Nginx?</h2>
<p>Since I wanted to improve my sites load speed I thought I should look around for some lighttpd-alternatives which I have used for so many years. The really annoying thing about <code>lighttpd</code> is its configuration syntax. I don&rsquo;t think it&rsquo;s comprehensive nor easy to learn. Besides that I wanted to have a configuration where <code>memcahed</code> plays a major role: Serve static content (html) from memcache. Lighttpd does have some modules/tutorials how to interact with <code>memcached</code> but I couldn&rsquo;t find any working configuration. Frustration but also curiosity brought me to <code>Nginx</code>.</p>
<p>According to the author Nginx <code>is an HTTP and reverse proxy server, as well as a mail proxy server</code>. I thought I should give it a try and test its performance against Lighttpd. Meanwhile I&rsquo;m using Lighttpd <code>'AND</code>&rsquo; Nginx on my server due to some regexp issue that have to be solved very soon. In that case Nginx acts a a proxy server (see below for configuration stuff).</p>
<h2 id="get-it">Get it!</h2>
<p>Before going further you should have the latest (stable) available Nginx version. If you use Debian make sure, you add following to your <code>/etc/apt/sources.list</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">deb-src http://nginx.org/packages/debian/ squeeze nginx
</span></span></code></pre></td></tr></table>
</div>
</div><p>On my system I have currently version <code>1.0.9-1</code> installed.</p>
<h2 id="basic-configuration">Basic configuration</h2>
<p>The main file for this part is <code>/etc/nginx/nginx.conf</code>. This is my <code>nginx.conf</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">user</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">worker_processes</span>  <span class="mi">5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">worker_rlimit_nofile</span> <span class="mi">8192</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">error_log</span>  <span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">error</span><span class="o">.</span><span class="n">log</span> <span class="n">warn</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">pid</span>        <span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">nginx</span><span class="o">.</span><span class="n">pid</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">events</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">worker_connections</span>  <span class="mi">4096</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">use</span> <span class="n">epoll</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">http</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">include</span>       <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">mime</span><span class="o">.</span><span class="n">types</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">default_type</span>  <span class="n">application</span><span class="o">/</span><span class="n">octet</span><span class="o">-</span><span class="n">stream</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">keepalive_requests</span>    <span class="mi">50</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">keepalive_timeout</span>     <span class="mi">300</span> <span class="mi">300</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">log_format</span>  <span class="n">main</span>  <span class="s1">&#39;$remote_addr - $remote_user [$time_local] &#34;$request&#34; &#39;</span>
</span></span><span class="line"><span class="cl">                      <span class="s1">&#39;$status $body_bytes_sent &#34;$http_referer&#34; &#39;</span>
</span></span><span class="line"><span class="cl">                      <span class="s1">&#39;&#34;$http_user_agent&#34; &#34;$http_x_forwarded_for&#34;&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">access_log</span>  <span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">access</span><span class="o">.</span><span class="n">log</span>  <span class="n">main</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">sendfile</span>        <span class="n">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#cp_nopush     on;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Compression</span>
</span></span><span class="line"><span class="cl">    <span class="n">gzip</span> <span class="n">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">gzip_buffers</span> <span class="mi">16</span> <span class="mi">8</span><span class="n">k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">gzip_comp_level</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">gzip_http_version</span> <span class="mf">1.1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">gzip_min_length</span> <span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">gzip_types</span> <span class="n">text</span><span class="o">/</span><span class="n">plain</span> <span class="n">text</span><span class="o">/</span><span class="n">css</span> <span class="n">application</span><span class="o">/</span><span class="n">x</span><span class="o">-</span><span class="n">javascript</span> <span class="n">text</span><span class="o">/</span><span class="n">xml</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">gzip_vary</span> <span class="n">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">gzip_proxied</span> <span class="n">any</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">gzip_disable</span> <span class="s2">&#34;MSIE [1-6].&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">include</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="o">/*.</span><span class="n">conf</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>I won&rsquo;t explain every line since this is not what I&rsquo;m supposed to do. Please have a look at the links at the end of this article for additional links.</p>
<h2 id="vhost-configuration">vHost configuration</h2>
<p>Well this is probably the most interesting part. You should have a configuration file per each vhost located at <code>/etc/nginx/conf.d/</code>. In my case the configuration was adapted to Drupals system and needs. Let&rsquo;s have a look:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">listen</span> <span class="mi">80</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">server_name</span> <span class="n">dornea</span><span class="o">.</span><span class="n">nu</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">root</span> <span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">sites</span><span class="o">/</span><span class="n">dornea</span><span class="o">.</span><span class="n">nu</span><span class="o">/</span><span class="n">htdocs</span><span class="o">/</span><span class="n">current</span><span class="p">;</span> <span class="c1">## &lt;-- Your only path reference.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">## Drupal Boost with nginx </span>
</span></span><span class="line"><span class="cl">        <span class="n">set</span> <span class="o">$</span><span class="n">boost</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">set</span> <span class="o">$</span><span class="n">boost_query</span> <span class="s2">&#34;_&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span> <span class="o">$</span><span class="n">request_method</span> <span class="o">=</span> <span class="n">GET</span> <span class="p">)</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">                <span class="n">set</span> <span class="o">$</span><span class="n">boost</span> <span class="n">G</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">$</span><span class="n">http_cookie</span> <span class="o">!~</span> <span class="s2">&#34;DRUPAL_UID&#34;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">set</span> <span class="o">$</span><span class="n">boost</span> <span class="s2">&#34;${boost}D&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">$</span><span class="n">query_string</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">set</span> <span class="o">$</span><span class="n">boost</span> <span class="s2">&#34;${boost}Q&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span> <span class="o">-</span><span class="n">f</span> <span class="o">$</span><span class="n">document_root</span><span class="o">/</span><span class="n">cache</span><span class="o">/</span><span class="n">normal</span><span class="o">/$</span><span class="n">host</span><span class="o">$</span><span class="n">request_uri</span><span class="o">$</span><span class="n">boost_query</span><span class="o">.</span><span class="n">html</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">set</span> <span class="o">$</span><span class="n">boost</span> <span class="s2">&#34;${boost}F&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">$</span><span class="n">boost</span> <span class="o">=</span> <span class="n">GDQF</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">rewrite</span> <span class="o">^.*$</span> <span class="o">/</span><span class="n">cache</span><span class="o">/</span><span class="n">normal</span><span class="o">/$</span><span class="n">host</span><span class="o">/$</span><span class="n">request_uri</span><span class="o">$</span><span class="n">boost_query</span><span class="o">.</span><span class="n">html</span> <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">location</span> <span class="o">=</span> <span class="o">/</span><span class="n">favicon</span><span class="o">.</span><span class="n">ico</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">log_not_found</span> <span class="n">off</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">access_log</span> <span class="n">off</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">location</span> <span class="o">=</span> <span class="o">/</span><span class="n">robots</span><span class="o">.</span><span class="n">txt</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">allow</span> <span class="n">all</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">log_not_found</span> <span class="n">off</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">access_log</span> <span class="n">off</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># This matters if you use drush</span>
</span></span><span class="line"><span class="cl">        <span class="n">location</span> <span class="o">=</span> <span class="o">/</span><span class="n">backup</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">auth_basic</span>            <span class="s2">&#34;Restricted&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">auth_basic_user_file</span>  <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">lighttpd</span><span class="o">/</span><span class="n">lighttpd_passwords</span><span class="o">.</span><span class="n">inc</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="c1">#deny all;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># Very rarely should these ever be accessed outside of your lan</span>
</span></span><span class="line"><span class="cl">        <span class="n">location</span> <span class="o">~*</span> <span class="o">.</span><span class="p">(</span><span class="n">txt</span><span class="o">|</span><span class="nb">log</span><span class="p">)</span><span class="o">$</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">allow</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">16</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">deny</span> <span class="n">all</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">location</span> <span class="o">~</span> <span class="o">..*/.*.</span><span class="n">php</span><span class="o">$</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="mi">403</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">location</span> <span class="o">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="n">set</span> <span class="o">$</span><span class="n">memcached_key</span> <span class="s2">&#34;nginx:$request_uri&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">memcached_pass</span> <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">11211</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">default_type</span>       <span class="n">text</span><span class="o">/</span><span class="n">html</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="n">error_page</span> <span class="mi">404</span> <span class="mi">405</span> <span class="mi">502</span> <span class="o">=</span> <span class="err">@</span><span class="n">fallback</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">autoindex</span>  <span class="n">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">location</span> <span class="err">@</span><span class="n">fallback</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">try_files</span> <span class="o">$</span><span class="n">uri</span> <span class="err">@</span><span class="n">rewrite</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">location</span> <span class="err">@</span><span class="n">rewrite</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># Some modules enforce no slash (/) at the end of the URL</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># Else this rewrite block wouldn&#39;t be needed (GlobalRedirect)</span>
</span></span><span class="line"><span class="cl">                <span class="c1">#rewrite ^/system/test/(.*)$     /index.php?q=system/test/$1;</span>
</span></span><span class="line"><span class="cl">                <span class="c1">#rewrite ^/system/files/(.*)$    /index.php?q=system/files/$1;</span>
</span></span><span class="line"><span class="cl">                <span class="n">rewrite</span> <span class="o">^/</span><span class="n">sitemap</span><span class="o">.</span><span class="n">xml</span><span class="o">$</span>          <span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">php</span><span class="err">?</span><span class="n">q</span><span class="o">=</span><span class="n">sitemap</span><span class="o">.</span><span class="n">xml</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="n">rewrite</span> <span class="o">^/</span><span class="p">(</span><span class="o">.*</span><span class="p">)</span><span class="o">$</span>                 <span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">php</span><span class="err">?</span><span class="n">q</span><span class="o">=$</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">location</span> <span class="o">~</span> <span class="o">.</span><span class="n">php</span><span class="o">$</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">fastcgi_split_path_info</span> <span class="o">^</span><span class="p">(</span><span class="o">.+.</span><span class="n">php</span><span class="p">)(</span><span class="o">/.+</span><span class="p">)</span><span class="o">$</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="c1">#NOTE: You should have &#34;cgi.fix_pathinfo = 0;&#34; in php.ini</span>
</span></span><span class="line"><span class="cl">                <span class="n">include</span> <span class="n">fastcgi_params</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">fastcgi_param</span> <span class="n">SCRIPT_FILENAME</span> <span class="o">$</span><span class="n">document_root</span><span class="o">$</span><span class="n">fastcgi_script_name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">fastcgi_param</span>  <span class="n">VERIFIED</span> <span class="o">$</span><span class="n">ssl_client_verify</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">fastcgi_param</span>  <span class="n">DN</span> <span class="o">$</span><span class="n">ssl_client_s_dn</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">fastcgi_intercept_errors</span> <span class="n">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># Fighting with ImageCache? This little gem is amazing.</span>
</span></span><span class="line"><span class="cl">        <span class="n">location</span> <span class="o">~</span> <span class="o">^/</span><span class="n">sites</span><span class="o">/.*/</span><span class="n">files</span><span class="o">/</span><span class="n">imagecache</span><span class="o">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">try_files</span> <span class="o">$</span><span class="n">uri</span> <span class="err">@</span><span class="n">rewrite</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># Catch image styles for D7 too.</span>
</span></span><span class="line"><span class="cl">        <span class="n">location</span> <span class="o">~</span> <span class="o">^/</span><span class="n">sites</span><span class="o">/.*/</span><span class="n">files</span><span class="o">/</span><span class="n">styles</span><span class="o">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">try_files</span> <span class="o">$</span><span class="n">uri</span> <span class="err">@</span><span class="n">rewrite</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">location</span> <span class="o">~*</span> <span class="o">.</span><span class="p">(</span><span class="n">js</span><span class="o">|</span><span class="n">css</span><span class="o">|</span><span class="n">png</span><span class="o">|</span><span class="n">jpg</span><span class="o">|</span><span class="n">jpeg</span><span class="o">|</span><span class="n">gif</span><span class="o">|</span><span class="n">ico</span><span class="p">)</span><span class="o">$</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">expires</span> <span class="mi">24</span><span class="n">h</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">log_not_found</span> <span class="n">off</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Having Drupals boost module enabled you should have static pages on your server which will be served by the memcache daemon. At the beginning of the configuration nginx checks if any static content should be served at all (ist the user logged in? etc.) If there is a html file which correlates with the URI then nginx will load the files content from memcache. If not: the PHP script will be executed. Speaking of PHP.. Lets have a look at <code>/etc/nginx/</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># cat /etc/nginx/fastcgi_params 
</span></span><span class="line"><span class="cl">fastcgi_pass   unix:/tmp/fcgi.sock;
</span></span><span class="line"><span class="cl">fastcgi_param  QUERY_STRING       $query_string;
</span></span><span class="line"><span class="cl">fastcgi_param  REQUEST_METHOD     $request_method;
</span></span><span class="line"><span class="cl">fastcgi_param  CONTENT_TYPE       $content_type;
</span></span><span class="line"><span class="cl">fastcgi_param  CONTENT_LENGTH     $content_length;
</span></span><span class="line"><span class="cl">fastcgi_param  SCRIPT_NAME        $fastcgi_script_name;
</span></span><span class="line"><span class="cl">fastcgi_param  REQUEST_URI        $request_uri;
</span></span><span class="line"><span class="cl">fastcgi_param  DOCUMENT_URI       $document_uri;
</span></span><span class="line"><span class="cl">fastcgi_param  DOCUMENT_ROOT      $document_root;
</span></span><span class="line"><span class="cl">fastcgi_param  SERVER_PROTOCOL    $server_protocol;
</span></span><span class="line"><span class="cl">fastcgi_param  GATEWAY_INTERFACE  CGI/1.1;
</span></span><span class="line"><span class="cl">fastcgi_param  SERVER_SOFTWARE    nginx/$nginx_version;
</span></span><span class="line"><span class="cl">fastcgi_param  REMOTE_ADDR        $remote_addr;
</span></span><span class="line"><span class="cl">fastcgi_param  REMOTE_PORT        $remote_port;
</span></span><span class="line"><span class="cl">fastcgi_param  SERVER_ADDR        $server_addr;
</span></span><span class="line"><span class="cl">fastcgi_param  SERVER_PORT        $server_port;
</span></span><span class="line"><span class="cl">fastcgi_param  SERVER_NAME        $server_name;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">fastcgi_index  index.php;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">fastcgi_param  REDIRECT_STATUS    200;
</span></span></code></pre></td></tr></table>
</div>
</div><p>I use a socket instead of child processes. The socket can be created using <code>/etc/init.d/fastcgi</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># cat /etc/init.d/fastcgi </span>
</span></span><span class="line"><span class="cl"><span class="c1">#!/bin/sh</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">### BEGIN INIT INFO</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Provides:          fastcgi</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Required-Start:    $local_fs $remote_fs $network $syslog</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Required-Stop:     $local_fs $remote_fs $network $syslog</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Default-Start:     2 3 4 5</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Default-Stop:      0 1 6</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Short-Description: starts the FastCGI server</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Description:       starts spawn-fcgi using start-stop-daemon</span>
</span></span><span class="line"><span class="cl"><span class="c1">### END INIT INFO</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">PATH</span><span class="o">=</span>/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
</span></span><span class="line"><span class="cl"><span class="nv">DAEMON</span><span class="o">=</span>/usr/local/bin/php-fastcgi
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">test</span> -x <span class="nv">$DAEMON</span> <span class="o">||</span> <span class="nb">exit</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">set</span> -e
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">RETVAL</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl"><span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span> in
</span></span><span class="line"><span class="cl">  start<span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$DAEMON</span>
</span></span><span class="line"><span class="cl">    <span class="nv">RETVAL</span><span class="o">=</span><span class="nv">$?</span>
</span></span><span class="line"><span class="cl">  <span class="p">;;</span>
</span></span><span class="line"><span class="cl">  stop<span class="o">)</span>
</span></span><span class="line"><span class="cl">    killall -9 php5-cgi
</span></span><span class="line"><span class="cl">    <span class="nv">RETVAL</span><span class="o">=</span><span class="nv">$?</span>
</span></span><span class="line"><span class="cl">  <span class="p">;;</span>
</span></span><span class="line"><span class="cl">  restart<span class="o">)</span>
</span></span><span class="line"><span class="cl">    killall -9 php5-cgi
</span></span><span class="line"><span class="cl">    <span class="nv">$DAEMON</span>
</span></span><span class="line"><span class="cl">    <span class="nv">RETVAL</span><span class="o">=</span><span class="nv">$?</span>
</span></span><span class="line"><span class="cl">  <span class="p">;;</span>
</span></span><span class="line"><span class="cl">  *<span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;Usage: php-fastcgi {start|stop|restart}&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">  <span class="p">;;</span>
</span></span><span class="line"><span class="cl"><span class="k">esac</span>
</span></span><span class="line"><span class="cl"><span class="nb">exit</span> <span class="nv">$RETVAL</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>php-fastcgi</code> is located at /usr/local/bin/:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># cat /usr/local/bin/php-fastcgi </span>
</span></span><span class="line"><span class="cl"><span class="c1">#!/bin/sh</span>
</span></span><span class="line"><span class="cl">/usr/bin/spawn-fcgi -F <span class="m">1</span> -C <span class="m">10</span> -a 127.0.0.1 -s /tmp/fcgi.sock -u www-data -g www-data -f <span class="s2">&#34;/usr/bin/php5-cgi -c /etc/php5/cgi/php.ini&#34;</span> -P /var/run/fastcgi-php.pid
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="nginx-as-proxy-server">Nginx as proxy server</h2>
<p>As already mentioned nginx can be used as a proxy server. In my case I need nginx to redirect requests on a certain subdomain to <code>lighttpd</code> listening to a local interface. The configuration:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="c1">### dl.dornea.nu</span>
</span></span><span class="line"><span class="cl"><span class="n">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">listen</span> <span class="mi">80</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">server_name</span> <span class="n">dl</span><span class="o">.</span><span class="n">dornea</span><span class="o">.</span><span class="n">nu</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">root</span> <span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">sites</span><span class="o">/</span><span class="n">dl</span><span class="o">.</span><span class="n">dornea</span><span class="o">.</span><span class="n">nu</span><span class="o">/</span><span class="n">htdocs</span><span class="o">/</span><span class="n">current</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">rewrite_log</span> <span class="n">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">index</span> <span class="n">index</span><span class="o">.</span><span class="n">php</span> <span class="n">index</span><span class="o">.</span><span class="n">html</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">location</span> <span class="o">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">#index index.php index.html;</span>
</span></span><span class="line"><span class="cl">        <span class="n">proxy_pass</span>         <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">proxy_redirect</span>     <span class="n">off</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">proxy_set_header</span>   <span class="n">Host</span>             <span class="o">$</span><span class="n">host</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">proxy_set_header</span>   <span class="n">X</span><span class="o">-</span><span class="n">Real</span><span class="o">-</span><span class="ne">IP</span>        <span class="o">$</span><span class="n">remote_addr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">proxy_set_header</span>   <span class="n">X</span><span class="o">-</span><span class="n">Forwarded</span><span class="o">-</span><span class="n">For</span>  <span class="o">$</span><span class="n">proxy_add_x_forwarded_for</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">proxy_connect_timeout</span>      <span class="mi">90</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">proxy_send_timeout</span>         <span class="mi">90</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">proxy_read_timeout</span>         <span class="mi">90</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">proxy_buffer_size</span>          <span class="mi">4</span><span class="n">k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">proxy_buffers</span>              <span class="mi">4</span> <span class="mi">32</span><span class="n">k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">proxy_busy_buffers_size</span>    <span class="mi">64</span><span class="n">k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">proxy_temp_file_write_size</span> <span class="mi">64</span><span class="n">k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">location</span> <span class="o">~*</span> <span class="o">.</span><span class="p">(</span><span class="n">js</span><span class="o">|</span><span class="n">css</span><span class="o">|</span><span class="n">png</span><span class="o">|</span><span class="n">jpg</span><span class="o">|</span><span class="n">jpeg</span><span class="o">|</span><span class="n">gif</span><span class="o">|</span><span class="n">ico</span><span class="p">)</span><span class="o">$</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">expires</span> <span class="mi">24</span><span class="n">h</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">log_not_found</span> <span class="n">off</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>All requests to <code>'dl.dornea.nu/*</code>&rsquo; will be redirected to <code>'http://127.0.0.1:8080</code>&rsquo;. Isn&rsquo;t that simple? Simple configuration, no need for magic!</p>
<h2 id="benchmarks">Benchmarks</h2>
<h3 id="ab-apache-suite-benchmark">ab (apache suite) benchmark</h3>
<h4 id="lighttpd">lighttpd</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ ab -n <span class="m">1000</span> -c <span class="m">2</span> http://dornea.nu/
</span></span><span class="line"><span class="cl">This is ApacheBench, Version 2.3 &lt;<span class="nv">$Revision</span>: <span class="m">655654</span> $&gt;
</span></span><span class="line"><span class="cl">Copyright <span class="m">1996</span> Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
</span></span><span class="line"><span class="cl">Licensed to The Apache Software Foundation, http://www.apache.org/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Benchmarking dornea.nu <span class="o">(</span>be patient<span class="o">)</span>
</span></span><span class="line"><span class="cl">Completed <span class="m">100</span> requests
</span></span><span class="line"><span class="cl">Completed <span class="m">200</span> requests
</span></span><span class="line"><span class="cl">Completed <span class="m">300</span> requests
</span></span><span class="line"><span class="cl">Completed <span class="m">400</span> requests
</span></span><span class="line"><span class="cl">Completed <span class="m">500</span> requests
</span></span><span class="line"><span class="cl">Completed <span class="m">600</span> requests
</span></span><span class="line"><span class="cl">Completed <span class="m">700</span> requests
</span></span><span class="line"><span class="cl">Completed <span class="m">800</span> requests
</span></span><span class="line"><span class="cl">Completed <span class="m">900</span> requests
</span></span><span class="line"><span class="cl">Completed <span class="m">1000</span> requests
</span></span><span class="line"><span class="cl">Finished <span class="m">1000</span> requests
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Server Software:        lighttpd/1.4.28
</span></span><span class="line"><span class="cl">Server Hostname:        dornea.nu
</span></span><span class="line"><span class="cl">Server Port:            <span class="m">80</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Document Path:          /
</span></span><span class="line"><span class="cl">Document Length:        <span class="m">48134</span> bytes
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Concurrency Level:      <span class="m">2</span>
</span></span><span class="line"><span class="cl">Time taken <span class="k">for</span> tests:   1438.721 seconds
</span></span><span class="line"><span class="cl">Complete requests:      <span class="m">1000</span>
</span></span><span class="line"><span class="cl">Failed requests:        <span class="m">2</span>
</span></span><span class="line"><span class="cl">   <span class="o">(</span>Connect: 0, Receive: 0, Length: 2, Exceptions: 0<span class="o">)</span>
</span></span><span class="line"><span class="cl">Write errors:           <span class="m">0</span>
</span></span><span class="line"><span class="cl">Total transferred:      <span class="m">48619020</span> bytes
</span></span><span class="line"><span class="cl">HTML transferred:       <span class="m">48133998</span> bytes
</span></span><span class="line"><span class="cl">Requests per second:    0.70 <span class="o">[</span><span class="c1">#/sec] (mean)</span>
</span></span><span class="line"><span class="cl">Time per request:       2877.441 <span class="o">[</span>ms<span class="o">]</span> <span class="o">(</span>mean<span class="o">)</span>
</span></span><span class="line"><span class="cl">Time per request:       1438.721 <span class="o">[</span>ms<span class="o">]</span> <span class="o">(</span>mean, across all concurrent requests<span class="o">)</span>
</span></span><span class="line"><span class="cl">Transfer rate:          33.00 <span class="o">[</span>Kbytes/sec<span class="o">]</span> received
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Connection Times <span class="o">(</span>ms<span class="o">)</span>
</span></span><span class="line"><span class="cl">              min  mean<span class="o">[</span>+/-sd<span class="o">]</span> median   max
</span></span><span class="line"><span class="cl">Connect:       <span class="m">36</span>   <span class="m">41</span>  18.8     <span class="m">39</span>     <span class="m">271</span>
</span></span><span class="line"><span class="cl">Processing:  <span class="m">1369</span> <span class="m">2836</span> 1314.7   <span class="m">2641</span>   <span class="m">15499</span>
</span></span><span class="line"><span class="cl">Waiting:     <span class="m">1215</span> <span class="m">2649</span> 1306.8   <span class="m">2467</span>   <span class="m">15346</span>
</span></span><span class="line"><span class="cl">Total:       <span class="m">1406</span> <span class="m">2877</span> 1314.6   <span class="m">2680</span>   <span class="m">15536</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Percentage of the requests served within a certain <span class="nb">time</span> <span class="o">(</span>ms<span class="o">)</span>
</span></span><span class="line"><span class="cl">  50%   <span class="m">2680</span>
</span></span><span class="line"><span class="cl">  66%   <span class="m">2903</span>
</span></span><span class="line"><span class="cl">  75%   <span class="m">3062</span>
</span></span><span class="line"><span class="cl">  80%   <span class="m">3208</span>
</span></span><span class="line"><span class="cl">  90%   <span class="m">3841</span>
</span></span><span class="line"><span class="cl">  95%   <span class="m">5057</span>
</span></span><span class="line"><span class="cl">  98%   <span class="m">6924</span>
</span></span><span class="line"><span class="cl">  99%   <span class="m">9111</span>
</span></span><span class="line"><span class="cl"> 100%  <span class="m">15536</span> <span class="o">(</span>longest request<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="nginx">nginx</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ ab -n <span class="m">1000</span> -c <span class="m">2</span> http://dornea.nu/
</span></span><span class="line"><span class="cl">This is ApacheBench, Version 2.3 &lt;<span class="nv">$Revision</span>: <span class="m">655654</span> $&gt;
</span></span><span class="line"><span class="cl">Copyright <span class="m">1996</span> Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
</span></span><span class="line"><span class="cl">Licensed to The Apache Software Foundation, http://www.apache.org/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Benchmarking dornea.nu <span class="o">(</span>be patient<span class="o">)</span>
</span></span><span class="line"><span class="cl">Completed <span class="m">100</span> requests
</span></span><span class="line"><span class="cl">Completed <span class="m">200</span> requests
</span></span><span class="line"><span class="cl">Completed <span class="m">300</span> requests
</span></span><span class="line"><span class="cl">Completed <span class="m">400</span> requests
</span></span><span class="line"><span class="cl">Completed <span class="m">500</span> requests
</span></span><span class="line"><span class="cl">Completed <span class="m">600</span> requests
</span></span><span class="line"><span class="cl">Completed <span class="m">700</span> requests
</span></span><span class="line"><span class="cl">Completed <span class="m">800</span> requests
</span></span><span class="line"><span class="cl">Completed <span class="m">900</span> requests
</span></span><span class="line"><span class="cl">Completed <span class="m">1000</span> requests
</span></span><span class="line"><span class="cl">Finished <span class="m">1000</span> requests
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Server Software:        nginx/1.0.9
</span></span><span class="line"><span class="cl">Server Hostname:        dornea.nu
</span></span><span class="line"><span class="cl">Server Port:            <span class="m">80</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Document Path:          /
</span></span><span class="line"><span class="cl">Document Length:        <span class="m">48216</span> bytes
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Concurrency Level:      <span class="m">2</span>
</span></span><span class="line"><span class="cl">Time taken <span class="k">for</span> tests:   133.533 seconds
</span></span><span class="line"><span class="cl">Complete requests:      <span class="m">1000</span>
</span></span><span class="line"><span class="cl">Failed requests:        <span class="m">0</span>
</span></span><span class="line"><span class="cl">Write errors:           <span class="m">0</span>
</span></span><span class="line"><span class="cl">Total transferred:      <span class="m">48451000</span> bytes
</span></span><span class="line"><span class="cl">HTML transferred:       <span class="m">48216000</span> bytes
</span></span><span class="line"><span class="cl">Requests per second:    7.49 <span class="o">[</span><span class="c1">#/sec] (mean)</span>
</span></span><span class="line"><span class="cl">Time per request:       267.065 <span class="o">[</span>ms<span class="o">]</span> <span class="o">(</span>mean<span class="o">)</span>
</span></span><span class="line"><span class="cl">Time per request:       133.533 <span class="o">[</span>ms<span class="o">]</span> <span class="o">(</span>mean, across all concurrent requests<span class="o">)</span>
</span></span><span class="line"><span class="cl">Transfer rate:          354.34 <span class="o">[</span>Kbytes/sec<span class="o">]</span> received
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Connection Times <span class="o">(</span>ms<span class="o">)</span>
</span></span><span class="line"><span class="cl">              min  mean<span class="o">[</span>+/-sd<span class="o">]</span> median   max
</span></span><span class="line"><span class="cl">Connect:       <span class="m">36</span>   <span class="m">42</span>  18.5     <span class="m">39</span>     <span class="m">268</span>
</span></span><span class="line"><span class="cl">Processing:   <span class="m">190</span>  <span class="m">225</span>  43.3    <span class="m">212</span>     <span class="m">483</span>
</span></span><span class="line"><span class="cl">Waiting:       <span class="m">36</span>   <span class="m">43</span>  17.9     <span class="m">40</span>     <span class="m">270</span>
</span></span><span class="line"><span class="cl">Total:        <span class="m">227</span>  <span class="m">267</span>  52.1    <span class="m">252</span>     <span class="m">713</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Percentage of the requests served within a certain <span class="nb">time</span> <span class="o">(</span>ms<span class="o">)</span>
</span></span><span class="line"><span class="cl">  50%    <span class="m">252</span>
</span></span><span class="line"><span class="cl">  66%    <span class="m">259</span>
</span></span><span class="line"><span class="cl">  75%    <span class="m">262</span>
</span></span><span class="line"><span class="cl">  80%    <span class="m">269</span>
</span></span><span class="line"><span class="cl">  90%    <span class="m">299</span>
</span></span><span class="line"><span class="cl">  95%    <span class="m">371</span>
</span></span><span class="line"><span class="cl">  98%    <span class="m">471</span>
</span></span><span class="line"><span class="cl">  99%    <span class="m">481</span>
</span></span><span class="line"><span class="cl"> 100%    <span class="m">713</span> <span class="o">(</span>longest request<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="toolspingdomcom-benchmark">tools.pingdom.com benchmark</h3>
<h4 id="lighttpd-1">lighttpd</h4>
<p><img src="https://blog.dornea.nu/posts/img/2012/pingdom_nl_dornea.nu_lighttpd.png" alt="lighttpd"></p>
<h3 id="nginx-1">nginx</h3>
<p><img src="https://blog.dornea.nu/posts/img/2012/pingdom_nl_dornea.nu_nginx.png" alt="lighttpd"></p>
<h2 id="literature">Literature</h2>
<ul>
<li>Nginx
<ul>
<li><a href="http://nginx.org/">http://nginx.org/</a></li>
<li><a href="http://wiki.nginx.org/Main">http://wiki.nginx.org/Main</a></li>
</ul>
</li>
<li>Basic Configuration
<ul>
<li><a href="http://wiki.nginx.org/Configuration">http://wiki.nginx.org/Configuration</a></li>
<li><a href="https://calomel.org/nginx.html">https://calomel.org/nginx.html</a></li>
</ul>
</li>
</ul>

    

  </div>
  
  
  

<section class="related-topics mt5 mb4">
  <div class="bt b--black-10 pt4">
    <h3 class="f4 fw6 mb3">Explore Related Topics</h3>
    
    <div class="cf">
      
      
      
      
      
      
      
      
      
      
      
      <div class="fl w-100">
        <div class="pa3 br2 bg-white ba b--black-10">
          <h4 class="f5 fw6 mt0 mb2">Explore My Main Topics</h4>
          <div class="cf">
            <div class="fl w-third-l pr2">
              <ul class="list pl0 mt0">
                <li class="pv1"><a href="https://blog.dornea.nu/tags/books" class="link dim dark-gray f6">Books & Reading</a></li>
                <li class="pv1"><a href="https://blog.dornea.nu/tags/summary" class="link dim dark-gray f6">Book Summaries</a></li>
              </ul>
            </div>
            <div class="fl w-third-l ph2">
              <ul class="list pl0 mt0">
                <li class="pv1"><a href="https://blog.dornea.nu/tags/philosophy" class="link dim dark-gray f6">Philosophy</a></li>
                <li class="pv1"><a href="https://blog.dornea.nu/tags/productivity" class="link dim dark-gray f6">Productivity</a></li>
                <li class="pv1"><a href="https://blog.dornea.nu/tags/politics" class="link dim dark-gray f6">Politics</a></li>
              </ul>
            </div>
            <div class="fl w-third-l pl2">
              <ul class="list pl0 mt0">
                <li class="pv1"><a href="https://blog.dornea.nu/tags/coding" class="link dim dark-gray f6">Coding</a></li>
                <li class="pv1"><a href="https://blog.dornea.nu/tags/emacs" class="link dim dark-gray f6">Emacs</a></li>
                <li class="pv1"><a href="https://brainfck.org" class="link dim dark-gray f6">My Zettelkasten</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      
    </div>
    
    <div class="tc mt4">
      <a href="https://blog.dornea.nu/tags" class="f6 link dim br-pill ph3 pv2 mb2 dib white bg-main-color">Browse All Tags</a>
    </div>
  </div>
</section>
  
  <div id="comments">
      

  </div>
</main>
 






<div class="tl fixed list-pages lh-copy" id="contents-list"></div>



<div class="pagination tc tr-l db fixed-l bottom-2-l right-2-l mb3 mb0-l">
  
<a id="scroll-to-top" class="f6 o-0 link br2 ph2 pv1 mb1 bg-main-color pointer" onclick="topFunction()" style="color: #fff; visibility: hidden; display: none; transition: opacity .5s, visibility .5s;" title="back to top">back to top</a>
<br>
  <p class="mb0 mt2">
  <a href="https://blog.dornea.nu/2011/12/19/need-any-sh3ll/">prev</a>
  <a href="https://blog.dornea.nu/2012/04/01/howto-split-mp3s-by-silence-detection-using-mp3splt/">next</a>
  </p>
</div>

  <footer class="content-width mt5 mb4 center ph3 gray f6">
  
  <div class="bt b--black-10 pv3"></div>
  
  
  <div class="cf">
    
    <div class="fl w-100 w-50-l pr4-l">
      <p class="mb2 fw6">About this blog</p>
      <p class="mv0 lh-copy">
        Personal thoughts on programming, productivity, and philosophy. I write about things I'm learning and ideas I find interesting.
      </p>
      <p class="mt3 o-70">
        © 2025 Victor Dorneanu
      </p>
    </div>
    
    
    <div class="fl w-100 w-50-l pl4-l mt4 mt0-l">
      <div class="cf">
        
        <div class="fl w-33">
          <p class="mb2 fw6">Navigation</p>
          <ul class="list pl0">
            <li class="pv1"><a href='https://blog.dornea.nu/' title="Home" class="link gray dim">Home</a></li>
            <li class="pv1"><a href='http://dornea.nu' title="About" class="link gray dim">About</a></li>
            <li class="pv1"><a href='https://blog.dornea.nu/tags' title="Tags" class="link gray dim">Tags</a></li>
            <li class="pv1"><a href='https://brainfck.org' title="Zettelkasten" class="link gray dim">Zettelkasten</a></li>
          </ul>
        </div>
        
        
        <div class="fl w-33">
          <p class="mb2 fw6">Connect</p>
          <ul class="list pl0">
            <li class="pv1">
              <a href='https://blog.dornea.nu/feed.xml' title="RSS" class="link gray dim">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="v-mid mr1"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg>
                RSS Feed
              </a>
            </li>
            <li class="pv1">
              <a href='https://github.com/dorneanu' title="GitHub" class="link gray dim">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="v-mid mr1"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>
                GitHub
              </a>
            </li>
            <li class="pv1">
              <a href='https://www.goodreads.com/user/show/121423977-victor-dorneanu' title="Goodreads" class="link gray dim">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="v-mid mr1"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg>
                Goodreads
              </a>
            </li>
          </ul>
        </div>

        
        <div class="fl w-33">
          <p class="mb2 fw6">Support</p>
          <div class="pv1">
            <a href="https://www.buymeacoffee.com/dorneanu" target="_blank" class="dib">
              <img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 40px;">
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  
  <div class="tc mt4 pt3 f7 o-70">
    Powered by <a href="https://gohugo.io/" target="_blank" class="link gray dim">Hugo</a>, based on the <a href="https://github.com/lingxz/er" target="_blank" class="link gray dim">Er</a> theme.
  </div>
</footer>
  



<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
<style>.is-active-link::before { background-color: var(--secondary-color); }</style>




<script type="text/javascript">
var prevScrollpos = window.pageYOffset;
window.onscroll = function() {
  var currentScrollPos = window.pageYOffset;

  
  if (document.getElementById("tag-cloud") !== null) { 
    if (prevScrollpos > currentScrollPos) { 
      document.getElementById("tag-cloud").style.visibility = "visible";
      document.getElementById("tag-cloud").style.opacity = "1";
    } else {
      document.getElementById("tag-cloud").style.visibility = "hidden";
      document.getElementById("tag-cloud").style.opacity = "0";
    }
  }
  

  
  if (document.body.scrollTop > 1000 || document.documentElement.scrollTop > 1000) {
      document.getElementById("scroll-to-top").style.display = "inline";
      document.getElementById("scroll-to-top").style.visibility = "visible";
      document.getElementById("scroll-to-top").style.opacity = "1";
  } else {
      document.getElementById("scroll-to-top").style.visibility = "hidden";
      document.getElementById("scroll-to-top").style.opacity = "0";
  }
  
  prevScrollpos = currentScrollPos;
}


function topFunction() {
  document.body.scrollTop = 0; 
  document.documentElement.scrollTop = 0; 
}






if (document.getElementById("contents-list") !== null && document.getElementsByClassName("post-content").length !== 0) { 
  tocbot.init({
    
    tocSelector: '#contents-list',
    
    contentSelector: '.post-content',
    
    headingSelector: 'h1, h2, h3',
  });
}


</script>





<script>
 var glightbox = GLightbox({
     selector: '.glightbox'
 });
</script>

  
</body>
</html>
