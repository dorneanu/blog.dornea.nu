<!doctype html>
<html lang="en">
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta content='text/html; charset=utf-8' http-equiv='content-type' />

<meta name="generator" content="Hugo 0.120.3">

<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" rel="stylesheet">
<link href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" rel="stylesheet"/>
<style type="text/css">/*https://coolors.co/afd5aa-f0f2ef-a69f98-3d3d3d-8c6057*/
:root {
  --main-color: #8C6056; 
  --secondary-color: #AFD5AA;
  --logo-text-color: #fff;
  --body-text-color: #3d3d3d;
  --heading-text-color: #383838;
  --background-color: #fff;
}</style>
<link href='https://blog.dornea.nu/css/tachyons.min.css' rel="stylesheet">
<link href='https://blog.dornea.nu/css/styles.css' rel="stylesheet">
<link rel="stylesheet" href="https://blog.dornea.nu/css/custom.css">
<link rel="stylesheet" href="https://blog.dornea.nu/css/syntax.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" />
<script src="https://cdn.jsdelivr.net/gh/mcstudios/glightbox/dist/js/glightbox.min.js"></script>


<link rel="icon" 
 
  href='https://blog.dornea.nu/favicon.ico'

type="image/x-icon"/>

<link href='https://blog.dornea.nu/feed.xml' rel="alternate" type="application/atom+xml" title="blog.dornea.nu" />



<script src="https://beamanalytics.b-cdn.net/beam.min.js" data-token="b8a4b728-8eda-42fb-8376-10168c622160" async>

</script>

</head>
<body class="global-font">
  <nav class="fixed w-100 bg-white bb b--black-10" id="navbar" style="z-index: 9999;">
  <div class="content-width center flex flex-wrap justify-between items-center pa3">
    
    <div class="flex items-center">
      <a class="f4 fw6 ttu no-underline dim bg-main-color pv1 ph3 br2 white" id="site-title" href='https://blog.dornea.nu/' title="Home">blog.dornea.nu</a>
    </div>

    
    <div class="dn flex-l items-center">
      
        
          <a class="link dim dark-gray f6 dib ml4 ttu tracked fw5" href='https://blog.dornea.nu/' title="Home">Home</a>
        
          <a class="link dim dark-gray f6 dib ml4 ttu tracked fw5" href='http://dornea.nu' title="About">About</a>
        
          <a class="link dim dark-gray f6 dib ml4 ttu tracked fw5" href='https://blog.dornea.nu/feed.xml' title="RSS">RSS</a>
        
          <a class="link dim dark-gray f6 dib ml4 ttu tracked fw5" href='https://blog.dornea.nu/tags' title="Tags">Tags</a>
        
          <a class="link dim dark-gray f6 dib ml4 ttu tracked fw5" href='https://brainfck.org' title="Zettelkasten">Zettelkasten</a>
        
      
    </div>

    
    <div class="db dn-l">
      <button class="bg-transparent bn pointer dim" id="menu-toggle">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
    </div>
  </div>

  
  <div class="dn bg-white w-100 pa3 shadow-1" id="mobile-menu">
    
      
        <a class="link dim dark-gray f6 db pv2 ttu tracked fw5" href='https://blog.dornea.nu/' title="Home">Home</a>
      
        <a class="link dim dark-gray f6 db pv2 ttu tracked fw5" href='http://dornea.nu' title="About">About</a>
      
        <a class="link dim dark-gray f6 db pv2 ttu tracked fw5" href='https://blog.dornea.nu/feed.xml' title="RSS">RSS</a>
      
        <a class="link dim dark-gray f6 db pv2 ttu tracked fw5" href='https://blog.dornea.nu/tags' title="Tags">Tags</a>
      
        <a class="link dim dark-gray f6 db pv2 ttu tracked fw5" href='https://brainfck.org' title="Zettelkasten">Zettelkasten</a>
      
    
  </div>
</nav>


<div class="h3"></div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const menuToggle = document.getElementById('menu-toggle');
    const mobileMenu = document.getElementById('mobile-menu');
    
    menuToggle.addEventListener('click', function() {
      const expanded = mobileMenu.classList.contains('db');
      mobileMenu.classList.toggle('db');
      mobileMenu.classList.toggle('dn');
    });
  });
</script>

  
<main class="center mv4 content-width ph3">
  <div class="f3 fw6 heading-color heading-font post-title">HowTo: Androguard with Docker</div>
  <p class="silver f6 mt1 mb4 post-meta">
    <time>12 Sep 2014</time> 
     | 
    

    
     ~
  

9 mins
|

    
    tags: [ <a href='https://blog.dornea.nu/tags/ipython' class="link silver">ipython</a> <a href='https://blog.dornea.nu/tags/python' class="link silver">python</a> <a href='https://blog.dornea.nu/tags/androguard' class="link silver">androguard</a> <a href='https://blog.dornea.nu/tags/android' class="link silver">android</a> <a href='https://blog.dornea.nu/tags/docker' class="link silver">docker</a> <a href='https://blog.dornea.nu/tags/howto' class="link silver">howto</a> <a href='https://blog.dornea.nu/tags/networking' class="link silver">networking</a> <a href='https://blog.dornea.nu/tags/mobile' class="link silver">mobile</a> <a href='https://blog.dornea.nu/tags/appsec' class="link silver">appsec</a> <a href='https://blog.dornea.nu/tags/iptables' class="link silver">iptables</a>  ]
    

  </p>
  <div class="lh-copy post-content">
    

      <p>Meanwhile I think I&rsquo;ve felt in love with <em>Androguard</em>. I love its Pythonic way handling things and its visualizations features. As many of you have noticed, you can run Androguard inside a <em>Docker</em> container. I&rsquo;ve never used Docker before so it was about time. You can find some general information about the installation process on Arch Linux at <a href="https://docs.docker.com/installation/archlinux/">this</a> address.</p>
<h3 id="extensions">Extensions</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="c1"># Install extensions</span>
</span></span><span class="line"><span class="cl"><span class="c1"># &lt;!-- collapse=True --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">%</span><span class="n">install_ext</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">dorneanu</span><span class="o">/</span><span class="n">ipython</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">extensions</span><span class="o">/</span><span class="n">diagmagic</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1"># Then load extensions</span>
</span></span><span class="line"><span class="cl"><span class="o">%</span><span class="n">load_ext</span> <span class="n">diagmagic</span>
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>Installed diagmagic.py. To use it, type:
  %load_ext diagmagic
The diagmagic extension is already loaded. To reload it, use:
  %reload_ext diagmagic
</code></pre>
<p>On my main pentest machine (kudoz to @blackarch) I&rsquo;ve installed docker and followed these instructions. Here is my service file:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">!cat /etc/systemd/system/docker.service
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>.include /usr/lib/systemd/system/docker.service
[Service]
# assume 192.168.1.1 is your proxy server, don't use 127.0.0.1
#Environment=&quot;http_proxy=192.168.1.1:3128&quot;
ExecStart=
ExecStart=/usr/bin/docker -d -g /home/cyneox/work/docker
</code></pre>
<p>I&rsquo;ve added myself to the <em>docker</em> group in order to be able to start docker as a regular user:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># sudo gpasswd -a cyneox docker</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Afterwards make sure you enable the service:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># sudo systemctl enable docker</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Now make sure you do a reboot (Windows style :D).</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">%%bash
</span></span><span class="line"><span class="cl"><span class="c1"># Check if docker is running</span>
</span></span><span class="line"><span class="cl">sudo systemctl start docker
</span></span><span class="line"><span class="cl">ps -ax <span class="p">|</span> grep docker
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>  836 ?        Ssl    0:00 /usr/bin/docker -d -g /home/cyneox/work/docker
</code></pre>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">!docker info
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>Containers: 0
Images: 0
Storage Driver: devicemapper
 Pool Name: docker-8:1-385640-pool
 Pool Blocksize: 64 Kb
 Data file: /home/cyneox/work/docker/devicemapper/devicemapper/data
 Metadata file: /home/cyneox/work/docker/devicemapper/devicemapper/metadata
 Data Space Used: 291.5 Mb
 Data Space Total: 102400.0 Mb
 Metadata Space Used: 0.7 Mb
 Metadata Space Total: 2048.0 Mb
Execution Driver: native-0.2
Kernel Version: 3.16.1-1-ARCH
Operating System: Arch Linux
WARNING: No swap limit support
</code></pre>
<h2 id="install-androguard">Install Androguard</h2>
<p>I could find 3 maintained dockerized Android images:</p>
<ol>
<li><a href="https://github.com/adepasquale/docker-androguard">https://github.com/adepasquale/docker-androguard</a></li>
<li><a href="https://github.com/dweinstein/dockerfile-androguard">https://github.com/dweinstein/dockerfile-androguard</a></li>
<li><a href="https://github.com/aikinci/androguard">https://github.com/aikinci/androguard</a></li>
</ol>
<p>The <a href="https://github.com/dweinstein/dockerfile-androguard">2nd</a> one started automatically <em>androguard</em> so you couldn&rsquo;t tweak the underlying system. So I&rsquo;ve decided to look at <a href="https://github.com/aikinci">@aikinci</a>&rsquo;s androguard docker container.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">!docker run -it -v ~/samples/:/root/samples/ honeynet/androguard 
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>Unable to find image 'honeynet/androguard' locally
Pulling repository honeynet/androguard

[1B
[0B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[1B
[36B]0;root@de3fbe90bdde: ~root@de3fbe90bdde:~# ^C
]0;root@de3fbe90bdde: ~root@de3fbe90bdde:~# 
]0;root@de3fbe90bdde: ~root@de3fbe90bdde:~# 
</code></pre>
<p>It must say that was pretty <strong>fast</strong>. And <strong>easy</strong> to do! In the end you&rsquo;ll get a root bash prompt. Since the image does not provide all the tools I need, you&rsquo;ll have to install them manually. After you have <code>exit</code>ed from the container you can attach it again. But first lets see which container are currently active:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">!docker ps -a
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>CONTAINER ID        IMAGE                        COMMAND             CREATED             STATUS              PORTS               NAMES
de3fbe90bdde        honeynet/androguard:latest   &quot;/bin/bash&quot;         5 minutes ago       Up 5 minutes                            sleepy_lalande      
</code></pre>
<p>Now you can re-attach to a specific container by using <code>docker attach</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># docker attach de3fbe90bdde</span>
</span></span><span class="line"><span class="cl">root@de3fbe90bdde:~# 
</span></span></code></pre></td></tr></table>
</div>
</div><p>Now I&rsquo;ve installed some additional packages:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">root@de3fbe90bdde:~# apt-get install openssh-server ipython ipython-notebook vim
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></td></tr></table>
</div>
</div><p>Now change the <code>root</code> password:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">root@de3fbe90bdde:~# passwd
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></td></tr></table>
</div>
</div><p>Start SSH server:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">root@de3fbe90bdde:~# /etc/init.d/sshd start
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></td></tr></table>
</div>
</div><p>Now <strong>most important</strong>: You&rsquo;ll have to <strong>commit</strong> your change to the image otherwise all changes will be lost on next start. On the maching running docker run:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># docker commit de3fbe90bdde</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="network-with-docker">Network with docker</h2>
<p>When started docker creates a new virtual interface on the <strong>host</strong> machine called <code>docker0</code> (<a href="https://docs.docker.com/articles/networking/">more</a>):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">!ifconfig docker0
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>docker0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500
        inet 172.17.42.1  netmask 255.255.0.0  broadcast 0.0.0.0
        inet6 fe80::bd01:3011:3b12:b866  prefixlen 64  scopeid 0x20&lt;link&gt;
        ether 56:84:7a:fe:97:99  txqueuelen 0  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
</code></pre>
<p>As you can see docker choosed a subnet and assigned an IP address to that interface. What about the <strong>guest</strong> machine?</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">root@de3fbe90bdde:~# ifconfig -a
</span></span><span class="line"><span class="cl">eth0      Link encap:Ethernet  HWaddr 02:5b:c7:1e:a8:26  
</span></span><span class="line"><span class="cl">          inet addr:172.17.0.2  Bcast:0.0.0.0  Mask:255.255.0.0
</span></span><span class="line"><span class="cl">          inet6 addr: fe80::5b:c7ff:fe1e:a826/64 Scope:Link
</span></span><span class="line"><span class="cl">          UP BROADCAST RUNNING  MTU:1500  Metric:1
</span></span><span class="line"><span class="cl">          RX packets:2225 errors:0 dropped:0 overruns:0 frame:0
</span></span><span class="line"><span class="cl">          TX packets:1949 errors:0 dropped:0 overruns:0 carrier:0
</span></span><span class="line"><span class="cl">          collisions:0 txqueuelen:1000 
</span></span><span class="line"><span class="cl">          RX bytes:17216525 <span class="o">(</span>17.2 MB<span class="o">)</span>  TX bytes:134553 <span class="o">(</span>134.5 KB<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Can I reach the container within the host machine?</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">!ping -c 4 172.17.0.2
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>PING 172.17.0.2 (172.17.0.2) 56(84) bytes of data.
64 bytes from 172.17.0.2: icmp_seq=1 ttl=64 time=0.086 ms
64 bytes from 172.17.0.2: icmp_seq=2 ttl=64 time=0.118 ms
64 bytes from 172.17.0.2: icmp_seq=3 ttl=64 time=0.131 ms
64 bytes from 172.17.0.2: icmp_seq=4 ttl=64 time=0.099 ms

--- 172.17.0.2 ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 2997ms
rtt min/avg/max/mdev = 0.086/0.108/0.131/0.020 ms
</code></pre>
<p>Looks good! Well before I go to the next steps let me show my current pentest setup.</p>
<h2 id="pentest-setup">Pentest setup</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">%%blockdiag
</span></span><span class="line"><span class="cl">// &lt;!-- collapse=True --&gt;
</span></span><span class="line"><span class="cl">blockdiag admin {
</span></span><span class="line"><span class="cl">    // A and B belong to first group.
</span></span><span class="line"><span class="cl">    group first_group {
</span></span><span class="line"><span class="cl">        label = &#34;&#34;;
</span></span><span class="line"><span class="cl">        color = &#34;#FFF&#34;;
</span></span><span class="line"><span class="cl">        Arch[label = &#34;Arch Linux Host&#34;];
</span></span><span class="line"><span class="cl">        group kvm_group {
</span></span><span class="line"><span class="cl">            label = &#34;KVM/QEMU&#34;;
</span></span><span class="line"><span class="cl">            textcolor = &#34;#FF0000&#34;;
</span></span><span class="line"><span class="cl">            color = &#34;#EFEFEF&#34;;
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            KaliLinux[label = &#34;Kali Linux&#34;];
</span></span><span class="line"><span class="cl">            Windows[label = &#34;Windows Pentest&#34;];
</span></span><span class="line"><span class="cl">            shape = line;
</span></span><span class="line"><span class="cl">            style = dashed;
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">            group blackarch {
</span></span><span class="line"><span class="cl">                label = &#34;&#34;;
</span></span><span class="line"><span class="cl">                textcolor = &#34;#FF0000&#34;;
</span></span><span class="line"><span class="cl">                color = &#34;#EFEFEF&#34;;
</span></span><span class="line"><span class="cl">                BlackArch[label = &#34;BlackArch Host&#34;];
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">               group docker {
</span></span><span class="line"><span class="cl">                  // Set group-label
</span></span><span class="line"><span class="cl">                  label = &#34;&#34;;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                  // Set background-color to this group.
</span></span><span class="line"><span class="cl">                  color = &#34;#77FF77&#34;;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                  // Set textcolor to this group
</span></span><span class="line"><span class="cl">                  textcolor = &#34;#FF0000&#34;;
</span></span><span class="line"><span class="cl">                  shape = line;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                  Docker;
</span></span><span class="line"><span class="cl">                  Docker -&gt; Androguard;
</span></span><span class="line"><span class="cl">                  Docker -&gt; Container1;
</span></span><span class="line"><span class="cl">                  Docker -&gt; ContainerX;
</span></span><span class="line"><span class="cl">               }
</span></span><span class="line"><span class="cl">            }
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   // E, F and G belong to second group.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   Arch -&gt; BlackArch;
</span></span><span class="line"><span class="cl">   Arch -&gt; KaliLinux;
</span></span><span class="line"><span class="cl">   Arch -&gt; Windows;
</span></span><span class="line"><span class="cl">   BlackArch -&gt; Docker;
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="https://blog.dornea.nu/posts/img/2014/howto-androguard-with-docker/output_23_0.png" alt="png"></p>
<p>On my physical machine (<code>Arch Linux Host</code>) I run several <code>QEMU</code> instances:</p>
<ul>
<li>Kali Linux (Pentest)</li>
<li>Windows (Pentest)</li>
<li>BlackArch (Pentest)</li>
</ul>
<h2 id="a-little-bit-of-networking">A little bit of networking</h2>
<p><strong>Inside</strong> <code>BlackArch</code> I run docker which manages several containers. Regarding the networking part this is what I want to achieve:</p>
<ol>
<li>Be able to access <code>Androguard</code> from <code>Arch Linux Host</code></li>
<li>Be able to access <code>Androguard</code> from <code>BlackArch Host</code></li>
<li>Be able to access the <em>Internet</em> from <code>Androguard</code></li>
</ol>
<p>The first one is the most important to me, since I want to access the Androguard container <strong>directly</strong> - preferably through SSH. Since the Àndroguard machine gets a private IP address, it&rsquo;s obvious I can&rsquo;t access it - yet. The packets must be routed though <code>BlackArch Host</code>. Let&rsquo;s check IPv4 forwarding:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">!sysctl net.ipv4.conf.all.forwarding
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>net.ipv4.conf.all.forwarding = 1
</code></pre>
<p>Ok for now. The Docker <a href="https://docs.docker.com/articles/networking/">documentation</a> states:</p>
<blockquote>
<p>By default Docker containers can make connections to the outside world, but the outside world cannot connect to containers. Each outgoing connection will appear to originate from one of the host machine&rsquo;s own IP addresses thanks to an iptables masquerading rule on the host machine that the Docker server creates when it starts</p>
</blockquote>
<p>After starting the Androguard container, let&rsquo;s check the firewall rules:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">!sudo iptables -t nat -L
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>Chain PREROUTING (policy ACCEPT)
target     prot opt source               destination         
DOCKER     all  --  anywhere             anywhere             ADDRTYPE match dst-type LOCAL

Chain INPUT (policy ACCEPT)
target     prot opt source               destination         

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination         
DOCKER     all  --  anywhere            !127.0.0.0/8          ADDRTYPE match dst-type LOCAL

Chain POSTROUTING (policy ACCEPT)
target     prot opt source               destination         
MASQUERADE  all  --  localhost/16         anywhere            

Chain DOCKER (2 references)
target     prot opt source               destination         
</code></pre>
<p>Having a futher look at the documentaton, I&rsquo;ve found this:</p>
<blockquote>
<p>More convenient is the -p SPEC or &ndash;publish=SPEC option which lets you be explicit about exactly which external port on the Docker server — which can be any port at all, not just those in the 49000–49900 block — you want mapped to which port in the container.</p>
</blockquote>
<p>Now, let&rsquo;s stop the container and restart it again with the <code>-p</code> paramater:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">!docker ps -a
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>CONTAINER ID        IMAGE                        COMMAND             CREATED             STATUS                     PORTS               NAMES
534dc09cc451        honeynet/androguard:latest   &quot;/bin/bash&quot;         14 seconds ago      Exited (0) 8 seconds ago                       sleepy_mcclintock   
</code></pre>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">%%bash
</span></span><span class="line"><span class="cl">docker stop 534dc09cc451
</span></span><span class="line"><span class="cl">docker rm 534dc09cc451
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>534dc09cc451
534dc09cc451
</code></pre>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">!docker ps -a
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
</code></pre>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">!docker run -t -i -p 22 honeynet/androguard 
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>]0;root@469eced649c1: ~root@469eced649c1:~# ^C
]0;root@469eced649c1: ~root@469eced649c1:~# 
]0;root@469eced649c1: ~root@469eced649c1:~# 
</code></pre>
<p>Now let&rsquo;s check iptables again:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">!sudo iptables -t nat -L
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>Chain PREROUTING (policy ACCEPT)
target     prot opt source               destination         
DOCKER     all  --  anywhere             anywhere             ADDRTYPE match dst-type LOCAL

Chain INPUT (policy ACCEPT)
target     prot opt source               destination         

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination         
DOCKER     all  --  anywhere            !127.0.0.0/8          ADDRTYPE match dst-type LOCAL

Chain POSTROUTING (policy ACCEPT)
target     prot opt source               destination         
MASQUERADE  all  --  localhost/16         anywhere            

Chain DOCKER (2 references)
target     prot opt source               destination         
DNAT       tcp  --  anywhere             anywhere             tcp dpt:49154 to:172.17.0.4:22
</code></pre>
<p>As you can see in the last line all packets sent to <strong>localhost:49154</strong> (which is <code>BlackArch Host</code>) will be forwarded to <strong>172.17.0.4:22</strong>. Bingo! On <code>Arch Linux Host</code> I try to reach <code>Androguard</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># telnet blackarch.local 49154</span>
</span></span><span class="line"><span class="cl">Trying 10.0.1.92...
</span></span><span class="line"><span class="cl">Connected to blackarch.local.
</span></span><span class="line"><span class="cl">Escape character is <span class="s1">&#39;^]&#39;</span>.
</span></span><span class="line"><span class="cl">SSH-2.0-OpenSSH_6.6.1p1 Ubuntu-2ubuntu2
</span></span><span class="line"><span class="cl">^C^C
</span></span><span class="line"><span class="cl">Connection closed by foreign host.
</span></span></code></pre></td></tr></table>
</div>
</div><p>Perfect!</p>
<h2 id="accessing-ipython-on-androguard">Accessing IPython on Androguard</h2>
<p>Now you could use port forwarding to access services on <code>Androguard</code> through the SSH tunnel. On the <code>Androguard</code> machine I usually start <code>ipython-notebook</code> to take notes etc. I usually run it as:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">root@469eced649c1:~/ipython# ipython notebook --no-browser --port <span class="m">7000</span>
</span></span><span class="line"><span class="cl">2014-09-11 16:48:11.330 <span class="o">[</span>NotebookApp<span class="o">]</span> Created profile dir: u<span class="s1">&#39;/root/.ipython/profile_default&#39;</span>
</span></span><span class="line"><span class="cl">2014-09-11 16:48:11.336 <span class="o">[</span>NotebookApp<span class="o">]</span> Using system MathJax
</span></span><span class="line"><span class="cl">2014-09-11 16:48:11.350 <span class="o">[</span>NotebookApp<span class="o">]</span> Serving notebooks from <span class="nb">local</span> directory: /root/ipython
</span></span><span class="line"><span class="cl">2014-09-11 16:48:11.350 <span class="o">[</span>NotebookApp<span class="o">]</span> The IPython Notebook is running at: http://127.0.0.1:7000/
</span></span><span class="line"><span class="cl">2014-09-11 16:48:11.350 <span class="o">[</span>NotebookApp<span class="o">]</span> Use Control-C to stop this server and shut down all kernels <span class="o">(</span>twice to skip confirmation<span class="o">)</span>.
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></td></tr></table>
</div>
</div><p>On <code>ArchLinux Host</code> I run:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># ssh -L localhost:7777:localhost:7000 root@blackarch.local -p 49154</span>
</span></span><span class="line"><span class="cl">root@blackarch.local<span class="err">&#39;</span>s password: 
</span></span><span class="line"><span class="cl">Welcome to Ubuntu 14.04 LTS <span class="o">(</span>GNU/Linux 3.2.0-37-generic x86_64<span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> * Documentation:  https://help.ubuntu.com/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">The programs included with the Ubuntu system are free software<span class="p">;</span>
</span></span><span class="line"><span class="cl">the exact distribution terms <span class="k">for</span> each program are described in the
</span></span><span class="line"><span class="cl">individual files in /usr/share/doc/*/copyright.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
</span></span><span class="line"><span class="cl">applicable law.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">root@469eced649c1:~# 
</span></span></code></pre></td></tr></table>
</div>
</div><p>As you can see I&rsquo;ve successfully logged in into the <code>Androguard</code> machine through <code>BlackArch Host</code> using <a href="http://en.wikipedia.org/wiki/Network_address_translation#DNAT">DNAT</a>. On <code>ArchLinux Host</code> I can open the browser and point to <code>http://localhost:7777</code> which connects to <code>IPython</code> on the <code>Androguard</code> machine.</p>

    

  </div>
  
  
  

<section class="related-topics mt5 mb4">
  <div class="bt b--black-10 pt4">
    <h3 class="f4 fw6 mb3">Explore Related Topics</h3>
    
    <div class="cf">
      
      
      
      
      
      
      
      
      
      
      
      <div class="fl w-100">
        <div class="pa3 br2 bg-white ba b--black-10">
          <h4 class="f5 fw6 mt0 mb2">Explore My Main Topics</h4>
          <div class="cf">
            <div class="fl w-third-l pr2">
              <ul class="list pl0 mt0">
                <li class="pv1"><a href="https://blog.dornea.nu/tags/books" class="link dim dark-gray f6">Books & Reading</a></li>
                <li class="pv1"><a href="https://blog.dornea.nu/tags/summary" class="link dim dark-gray f6">Book Summaries</a></li>
              </ul>
            </div>
            <div class="fl w-third-l ph2">
              <ul class="list pl0 mt0">
                <li class="pv1"><a href="https://blog.dornea.nu/tags/philosophy" class="link dim dark-gray f6">Philosophy</a></li>
                <li class="pv1"><a href="https://blog.dornea.nu/tags/productivity" class="link dim dark-gray f6">Productivity</a></li>
                <li class="pv1"><a href="https://blog.dornea.nu/tags/politics" class="link dim dark-gray f6">Politics</a></li>
              </ul>
            </div>
            <div class="fl w-third-l pl2">
              <ul class="list pl0 mt0">
                <li class="pv1"><a href="https://blog.dornea.nu/tags/coding" class="link dim dark-gray f6">Coding</a></li>
                <li class="pv1"><a href="https://blog.dornea.nu/tags/emacs" class="link dim dark-gray f6">Emacs</a></li>
                <li class="pv1"><a href="https://brainfck.org" class="link dim dark-gray f6">My Zettelkasten</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      
    </div>
    
    <div class="tc mt4">
      <a href="https://blog.dornea.nu/tags" class="f6 link dim br-pill ph3 pv2 mb2 dib white bg-main-color">Browse All Tags</a>
    </div>
  </div>
</section>
  
  <div id="comments">
      

  </div>
</main>
 






<div class="tl fixed list-pages lh-copy" id="contents-list"></div>



<div class="pagination tc tr-l db fixed-l bottom-2-l right-2-l mb3 mb0-l">
  
<a id="scroll-to-top" class="f6 o-0 link br2 ph2 pv1 mb1 bg-main-color pointer" onclick="topFunction()" style="color: #fff; visibility: hidden; display: none; transition: opacity .5s, visibility .5s;" title="back to top">back to top</a>
<br>
  <p class="mb0 mt2">
  <a href="https://blog.dornea.nu/2014/08/28/using-jquery-datatables-with-ipython/">prev</a>
  <a href="https://blog.dornea.nu/2014/09/17/generate-all-ip-addresses-from-asn/">next</a>
  </p>
</div>

  <footer class="content-width mt5 mb4 center ph3 gray f6">
  
  <div class="bt b--black-10 pv3"></div>
  
  
  <div class="cf">
    
    <div class="fl w-100 w-50-l pr4-l">
      <p class="mb2 fw6">About this blog</p>
      <p class="mv0 lh-copy">
        Personal thoughts on programming, productivity, and philosophy. I write about things I'm learning and ideas I find interesting.
      </p>
      <p class="mt3 o-70">
        © 2025 Victor Dorneanu
      </p>
    </div>
    
    
    <div class="fl w-100 w-50-l pl4-l mt4 mt0-l">
      <div class="cf">
        
        <div class="fl w-33">
          <p class="mb2 fw6">Navigation</p>
          <ul class="list pl0">
            <li class="pv1"><a href='https://blog.dornea.nu/' title="Home" class="link gray dim">Home</a></li>
            <li class="pv1"><a href='http://dornea.nu' title="About" class="link gray dim">About</a></li>
            <li class="pv1"><a href='https://blog.dornea.nu/tags' title="Tags" class="link gray dim">Tags</a></li>
            <li class="pv1"><a href='https://brainfck.org' title="Zettelkasten" class="link gray dim">Zettelkasten</a></li>
          </ul>
        </div>
        
        
        <div class="fl w-33">
          <p class="mb2 fw6">Connect</p>
          <ul class="list pl0">
            <li class="pv1">
              <a href='https://blog.dornea.nu/feed.xml' title="RSS" class="link gray dim">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="v-mid mr1"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg>
                RSS Feed
              </a>
            </li>
            <li class="pv1">
              <a href='https://github.com/dorneanu' title="GitHub" class="link gray dim">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="v-mid mr1"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>
                GitHub
              </a>
            </li>
            <li class="pv1">
              <a href='https://www.goodreads.com/user/show/121423977-victor-dorneanu' title="Goodreads" class="link gray dim">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="v-mid mr1"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg>
                Goodreads
              </a>
            </li>
          </ul>
        </div>

        
        <div class="fl w-33">
          <p class="mb2 fw6">Support</p>
          <div class="pv1">
            <a href="https://www.buymeacoffee.com/dorneanu" target="_blank" class="dib">
              <img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 40px;">
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  
  <div class="tc mt4 pt3 f7 o-70">
    Powered by <a href="https://gohugo.io/" target="_blank" class="link gray dim">Hugo</a>, based on the <a href="https://github.com/lingxz/er" target="_blank" class="link gray dim">Er</a> theme.
  </div>
</footer>
  



<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
<style>.is-active-link::before { background-color: var(--secondary-color); }</style>




<script type="text/javascript">
var prevScrollpos = window.pageYOffset;
window.onscroll = function() {
  var currentScrollPos = window.pageYOffset;

  
  if (document.getElementById("tag-cloud") !== null) { 
    if (prevScrollpos > currentScrollPos) { 
      document.getElementById("tag-cloud").style.visibility = "visible";
      document.getElementById("tag-cloud").style.opacity = "1";
    } else {
      document.getElementById("tag-cloud").style.visibility = "hidden";
      document.getElementById("tag-cloud").style.opacity = "0";
    }
  }
  

  
  if (document.body.scrollTop > 1000 || document.documentElement.scrollTop > 1000) {
      document.getElementById("scroll-to-top").style.display = "inline";
      document.getElementById("scroll-to-top").style.visibility = "visible";
      document.getElementById("scroll-to-top").style.opacity = "1";
  } else {
      document.getElementById("scroll-to-top").style.visibility = "hidden";
      document.getElementById("scroll-to-top").style.opacity = "0";
  }
  
  prevScrollpos = currentScrollPos;
}


function topFunction() {
  document.body.scrollTop = 0; 
  document.documentElement.scrollTop = 0; 
}






if (document.getElementById("contents-list") !== null && document.getElementsByClassName("post-content").length !== 0) { 
  tocbot.init({
    
    tocSelector: '#contents-list',
    
    contentSelector: '.post-content',
    
    headingSelector: 'h1, h2, h3',
  });
}


</script>





<script>
 var glightbox = GLightbox({
     selector: '.glightbox'
 });
</script>

  
</body>
</html>
