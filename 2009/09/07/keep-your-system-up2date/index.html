<!doctype html>
<html lang="en">
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta content='text/html; charset=utf-8' http-equiv='content-type' />

  <title>Keep your system up2date! - blog.dornea.nu</title>
  <meta content='Keep your system up2date! - blog.dornea.nu' property='title' />
  <meta content='Keep your system up2date! - blog.dornea.nu' property='og:title' />


<meta property="og:description" content="Due to NetBSD’s great packaging system, software gets updated very frequently. It is very important to have a clean and safe system running and no outdated packages on your system. They might be vulnerable to recently discovered bugs and affect your systems’s security and performance. After updating the package tree (see documentation), I usually update my whole system by running:
1  $ pkg_chk -su   Actually there is nothing wrong about that." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.dornea.nu/2009/09/07/keep-your-system-up2date/" />


<meta property="article:published_time" content="2009-09-07T00:00:00&#43;00:00"/>

<meta property="article:modified_time" content="2009-09-07T00:00:00&#43;00:00"/>








<meta name="generator" content="Hugo 0.89.4" />

<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" rel="stylesheet">
<link href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" rel="stylesheet"/>
<style type="text/css">/*https://coolors.co/afd5aa-f0f2ef-a69f98-3d3d3d-8c6057*/
:root {
  --main-color: #8C6056; 
  --secondary-color: #AFD5AA;
  --logo-text-color: #fff;
  --body-text-color: #3d3d3d;
  --heading-text-color: #383838;
  --background-color: #fff;
}</style>
<link href='https://blog.dornea.nu/css/tachyons.min.css' rel="stylesheet">
<link href='https://blog.dornea.nu/css/styles.css' rel="stylesheet">
<link rel="stylesheet" href="https://blog.dornea.nu/css/custom.css">
<link rel="stylesheet" href="https://blog.dornea.nu/css/syntax.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" />
<script src="https://cdn.jsdelivr.net/gh/mcstudios/glightbox/dist/js/glightbox.min.js"></script>


<link rel="icon" 
 
  href='https://blog.dornea.nu/favicon.ico'

type="image/x-icon"/>

<link href='https://blog.dornea.nu/feed.xml' rel="alternate" type="application/atom+xml" title="blog.dornea.nu" />



<script src="https://beamanalytics.b-cdn.net/beam.min.js" data-token="b8a4b728-8eda-42fb-8376-10168c622160" async></script>
</head>
<body class="global-font">
  <nav class=" flex-ns justify-between border-box pa3 pl3-l pr2-l mt1 mt0-ns" id="navbar">
  <div class="flex">
    <a class="f4 fw6 ttu no-underline dim bg-main-color pv1 ph2 br2" id="site-title" href='https://blog.dornea.nu/' title="Home">blog.dornea.nu</a>
  </div>
  
  <div class=" flex-ns mt2 mt0-ns pv1">
    
      <a class="link dim dark-gray f6 dib mr2 mr3-l ttu tracked" href='https://blog.dornea.nu/' title="Home">Home</a>
    
      <a class="link dim dark-gray f6 dib mr2 mr3-l ttu tracked" href='http://dornea.nu' title="About">About</a>
    
      <a class="link dim dark-gray f6 dib mr2 mr3-l ttu tracked" href='https://blog.dornea.nu/feed.xml' title="RSS">RSS</a>
    
      <a class="link dim dark-gray f6 dib mr2 mr3-l ttu tracked" href='https://blog.dornea.nu/tags' title="Tags">Tags</a>
    
      <a class="link dim dark-gray f6 dib mr2 mr3-l ttu tracked" href='https://brainfck.org' title="Zettelkasten">Zettelkasten</a>
    
  </div>
  
</nav>
  
<main class="center mv4 content-width ph3">
  <div class="f3 fw6 heading-color heading-font post-title">Keep your system up2date!</div>
  <p class="silver f6 mt1 mb4 post-meta">
    <time>07 Sep 2009</time> 
     | 
    

    
     ~
  

2 mins
|

    
    tags: [ <a href='https://blog.dornea.nu/tags/misc' class="link silver">misc</a> <a href='https://blog.dornea.nu/tags/netbsd' class="link silver">netbsd</a> <a href='https://blog.dornea.nu/tags/admin' class="link silver">admin</a> <a href='https://blog.dornea.nu/tags/update' class="link silver">update</a>  ]
    

  </p>
  <div class="lh-copy post-content">
    

      <p>Due to NetBSD’s great packaging system, software gets updated very frequently. It is very important to have a clean and safe system running and no outdated packages on your system. They might be vulnerable to recently discovered bugs and affect your systems’s security and performance. After updating the package tree (see <a href="http://www.netbsd.org/docs/pkgsrc/using.html">documentation</a>), I usually update my whole system by running:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ pkg_chk -su
</code></pre></td></tr></table>
</div>
</div><p>Actually there is nothing wrong about that. Yet there is one big problem, which caused me to seek for another updating mechanism.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ pkg_chk -sun &gt; pkg_chk.log
</code></pre></td></tr></table>
</div>
</div><p>The log file might look like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">archivers</span><span class="o">/</span><span class="nx">gtar</span><span class="o">-</span><span class="nx">base</span> <span class="o">-</span> <span class="nx">gtar</span><span class="o">-</span><span class="nx">base</span><span class="o">-</span><span class="mf">1.20</span> <span class="p">&lt;</span> <span class="nx">gtar</span><span class="o">-</span><span class="nx">base</span><span class="o">-</span><span class="mf">1.22</span>
<span class="nx">WARNING</span><span class="p">:</span> <span class="nx">No</span> <span class="nx">archivers</span><span class="o">/</span><span class="nx">lzma</span><span class="o">-</span><span class="nx">utils</span><span class="o">/</span><span class="nx">Makefile</span> <span class="o">-</span> <span class="kn">package</span> <span class="nx">moved</span> <span class="nx">or</span> <span class="nx">obsolete</span><span class="err">?</span>
<span class="nx">archivers</span><span class="o">/</span><span class="nx">unrar</span> <span class="o">-</span> <span class="nx">unrar</span><span class="o">-</span><span class="mf">3.8.3</span> <span class="p">&lt;</span> <span class="nx">unrar</span><span class="o">-</span><span class="mf">3.9.5</span>
<span class="nx">archivers</span><span class="o">/</span><span class="nx">zip</span> <span class="o">-</span> <span class="nx">zip</span><span class="o">-</span><span class="mf">2.32</span> <span class="p">&lt;</span> <span class="nx">zip</span><span class="o">-</span><span class="mf">3.0</span><span class="nx">nb1</span>
<span class="nx">archivers</span><span class="o">/</span><span class="nx">zziplib</span> <span class="o">-</span> <span class="nx">zziplib</span><span class="o">-</span><span class="mf">0.10.82</span><span class="nx">nb3</span> <span class="p">&lt;</span> <span class="nx">zziplib</span><span class="o">-</span><span class="mf">0.13.56</span>
<span class="nx">audio</span><span class="o">/</span><span class="nx">amarok</span> <span class="o">-</span> <span class="nx">amarok</span><span class="o">-</span><span class="mf">1.4.10</span><span class="nx">nb4</span> <span class="p">&lt;</span> <span class="nx">amarok</span><span class="o">-</span><span class="mf">1.4.10</span><span class="nx">nb5</span>
<span class="nx">audio</span><span class="o">/</span><span class="nx">cdparanoia</span> <span class="o">-</span> <span class="nx">cdparanoia</span><span class="o">-</span><span class="mf">3.0.9.8</span><span class="nx">nb8</span> <span class="p">&lt;</span> <span class="nx">cdparanoia</span><span class="o">-</span><span class="mf">3.0.10.2</span><span class="nx">nb1</span>
<span class="nx">audio</span><span class="o">/</span><span class="nx">libcddb</span> <span class="o">-</span> <span class="nx">libcddb</span><span class="o">-</span><span class="mf">1.3.0</span> <span class="p">&lt;</span> <span class="nx">libcddb</span><span class="o">-</span><span class="mf">1.3.2</span>
<span class="nx">audio</span><span class="o">/</span><span class="nx">libvorbis</span> <span class="o">-</span> <span class="nx">libvorbis</span><span class="o">-</span><span class="mf">1.2.0</span><span class="nx">nb1</span> <span class="p">&lt;</span> <span class="nx">libvorbis</span><span class="o">-</span><span class="mf">1.2.3</span>
<span class="nx">audio</span><span class="o">/</span><span class="nx">nas</span> <span class="o">-</span> <span class="nx">nas</span><span class="o">-</span><span class="mf">1.9.1</span><span class="nx">nb1</span> <span class="p">&lt;</span> <span class="nx">nas</span><span class="o">-</span><span class="mf">1.9.1</span><span class="nx">nb2</span>
<span class="nx">audio</span><span class="o">/</span><span class="nx">pulseaudio</span> <span class="o">-</span> <span class="nx">pulseaudio</span><span class="o">-</span><span class="mf">0.9.14</span><span class="nx">nb2</span> <span class="p">&lt;</span> <span class="nx">pulseaudio</span><span class="o">-</span><span class="mf">0.9.14</span><span class="nx">nb4</span>
<span class="nx">audio</span><span class="o">/</span><span class="nx">speex</span> <span class="o">-</span> <span class="nx">speex</span><span class="o">-</span><span class="mf">1.2</span><span class="nx">rc1</span> <span class="p">&lt;</span> <span class="nx">speex</span><span class="o">-</span><span class="mf">1.2</span><span class="nx">rc1nb1</span>
<span class="nx">audio</span><span class="o">/</span><span class="nx">wavpack</span> <span class="o">-</span> <span class="nx">wavpack</span><span class="o">-</span><span class="mf">4.41.0</span> <span class="p">&lt;</span> <span class="nx">wavpack</span><span class="o">-</span><span class="mf">4.50.1</span>
<span class="nx">chat</span><span class="o">/</span><span class="nx">libpurple</span> <span class="o">-</span> <span class="nx">libpurple</span><span class="o">-</span><span class="mf">2.5.7</span> <span class="p">&lt;</span> <span class="nx">libpurple</span><span class="o">-</span><span class="mf">2.6.1</span>
<span class="nx">chat</span><span class="o">/</span><span class="nx">pidgin</span> <span class="o">-</span> <span class="nx">pidgin</span><span class="o">-</span><span class="mf">2.5.7</span> <span class="p">&lt;</span> <span class="nx">pidgin</span><span class="o">-</span><span class="mf">2.6.1</span>
<span class="nx">databases</span><span class="o">/</span><span class="nx">sqlite</span> <span class="o">-</span> <span class="nx">sqlite</span><span class="o">-</span><span class="mf">2.8.16</span><span class="nx">nb2</span> <span class="p">&lt;</span> <span class="nx">sqlite</span><span class="o">-</span><span class="mf">2.8.17</span>
<span class="nx">databases</span><span class="o">/</span><span class="nx">sqlite3</span> <span class="o">-</span> <span class="nx">sqlite3</span><span class="o">-</span><span class="mf">3.6.16</span> <span class="p">&lt;</span> <span class="nx">sqlite3</span><span class="o">-</span><span class="mf">3.6.17</span>
<span class="nx">devel</span><span class="o">/</span><span class="nx">SDL</span> <span class="o">-</span> <span class="nx">SDL</span><span class="o">-</span><span class="mf">1.2.13</span><span class="nx">nb4</span> <span class="p">&lt;</span> <span class="nx">SDL</span><span class="o">-</span><span class="mf">1.2.13</span><span class="nx">nb5</span>
<span class="nx">devel</span><span class="o">/</span><span class="nx">apr</span> <span class="o">-</span> <span class="nx">apr</span><span class="o">-</span><span class="mf">1.3.5</span> <span class="p">&lt;</span> <span class="nx">apr</span><span class="o">-</span><span class="mf">1.3.8</span>
<span class="nx">devel</span><span class="o">/</span><span class="nx">apr</span><span class="o">-</span><span class="nx">util</span> <span class="o">-</span> <span class="nx">apr</span><span class="o">-</span><span class="nx">util</span><span class="o">-</span><span class="mf">1.3.7</span> <span class="p">&lt;</span> <span class="nx">apr</span><span class="o">-</span><span class="nx">util</span><span class="o">-</span><span class="mf">1.3.9</span>
<span class="nx">devel</span><span class="o">/</span><span class="nx">autoconf</span> <span class="o">-</span> <span class="nx">autoconf</span><span class="o">-</span><span class="mf">2.63</span> <span class="p">&lt;</span> <span class="nx">autoconf</span><span class="o">-</span><span class="mf">2.64</span>
<span class="o">...</span>

<span class="mi">15</span><span class="p">:</span><span class="mi">52</span> <span class="o">/</span><span class="nx">usr</span><span class="o">/</span><span class="nx">pkg</span><span class="o">/</span><span class="nx">sbin</span><span class="o">/</span><span class="nx">pkg_delete</span> <span class="o">-</span><span class="nx">K</span> <span class="o">/</span><span class="kd">var</span><span class="o">/</span><span class="nx">db</span><span class="o">/</span><span class="nx">pkg</span> <span class="o">-</span><span class="nx">r</span> <span class="nx">gtar</span><span class="o">-</span><span class="nx">base</span><span class="o">-</span><span class="mf">1.20</span>
<span class="mi">15</span><span class="p">:</span><span class="mi">52</span> <span class="o">/</span><span class="nx">usr</span><span class="o">/</span><span class="nx">pkg</span><span class="o">/</span><span class="nx">sbin</span><span class="o">/</span><span class="nx">pkg_delete</span> <span class="o">-</span><span class="nx">K</span> <span class="o">/</span><span class="kd">var</span><span class="o">/</span><span class="nx">db</span><span class="o">/</span><span class="nx">pkg</span> <span class="o">-</span><span class="nx">r</span> <span class="nx">unrar</span><span class="o">-</span><span class="mf">3.8.3</span>
<span class="mi">15</span><span class="p">:</span><span class="mi">52</span> <span class="o">/</span><span class="nx">usr</span><span class="o">/</span><span class="nx">pkg</span><span class="o">/</span><span class="nx">sbin</span><span class="o">/</span><span class="nx">pkg_delete</span> <span class="o">-</span><span class="nx">K</span> <span class="o">/</span><span class="kd">var</span><span class="o">/</span><span class="nx">db</span><span class="o">/</span><span class="nx">pkg</span> <span class="o">-</span><span class="nx">r</span> <span class="nx">zip</span><span class="o">-</span><span class="mf">2.32</span>
<span class="mi">15</span><span class="p">:</span><span class="mi">52</span> <span class="o">/</span><span class="nx">usr</span><span class="o">/</span><span class="nx">pkg</span><span class="o">/</span><span class="nx">sbin</span><span class="o">/</span><span class="nx">pkg_delete</span> <span class="o">-</span><span class="nx">K</span> <span class="o">/</span><span class="kd">var</span><span class="o">/</span><span class="nx">db</span><span class="o">/</span><span class="nx">pkg</span> <span class="o">-</span><span class="nx">r</span> <span class="nx">zziplib</span><span class="o">-</span><span class="mf">0.10.82</span><span class="nx">nb3</span>
<span class="mi">15</span><span class="p">:</span><span class="mi">52</span> <span class="o">/</span><span class="nx">usr</span><span class="o">/</span><span class="nx">pkg</span><span class="o">/</span><span class="nx">sbin</span><span class="o">/</span><span class="nx">pkg_delete</span> <span class="o">-</span><span class="nx">K</span> <span class="o">/</span><span class="kd">var</span><span class="o">/</span><span class="nx">db</span><span class="o">/</span><span class="nx">pkg</span> <span class="o">-</span><span class="nx">r</span> <span class="nx">amarok</span><span class="o">-</span><span class="mf">1.4.10</span><span class="nx">nb4</span>
<span class="mi">15</span><span class="p">:</span><span class="mi">52</span> <span class="o">/</span><span class="nx">usr</span><span class="o">/</span><span class="nx">pkg</span><span class="o">/</span><span class="nx">sbin</span><span class="o">/</span><span class="nx">pkg_delete</span> <span class="o">-</span><span class="nx">K</span> <span class="o">/</span><span class="kd">var</span><span class="o">/</span><span class="nx">db</span><span class="o">/</span><span class="nx">pkg</span> <span class="o">-</span><span class="nx">r</span> <span class="nx">cdparanoia</span><span class="o">-</span><span class="mf">3.0.9.8</span><span class="nx">nb8</span>
<span class="mi">15</span><span class="p">:</span><span class="mi">52</span> <span class="o">/</span><span class="nx">usr</span><span class="o">/</span><span class="nx">pkg</span><span class="o">/</span><span class="nx">sbin</span><span class="o">/</span><span class="nx">pkg_delete</span> <span class="o">-</span><span class="nx">K</span> <span class="o">/</span><span class="kd">var</span><span class="o">/</span><span class="nx">db</span><span class="o">/</span><span class="nx">pkg</span> <span class="o">-</span><span class="nx">r</span> <span class="nx">libcddb</span><span class="o">-</span><span class="mf">1.3.0</span>
<span class="o">...</span>

<span class="p">[</span> <span class="nx">Rechecking</span> <span class="nx">packages</span> <span class="nx">after</span> <span class="nx">deletions</span> <span class="p">]</span>
</code></pre></td></tr></table>
</div>
</div><p>o before updating any package “pkg_chk” will first delete the package AND its dependencies. This will take a lot of time when you’ll have to update big packages, e.g. Firefox. All its dependencies will be first updated and then the main package (in this case Firefox).</p>
<p>If you want to save time and effort, you should better use another utility called “pkg_rolling-replace”. This will rebuild or update packages using “make replace” in tsorted order. For more information click <a href="http://pkgsrc.se/pkgtools/pkg_rolling-replace">here</a>.</p>
<p>In order to update all packages on my system and ensure correct shared library dependencies, I run following commando:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ pkg_rolling-replace -rsuv
</code></pre></td></tr></table>
</div>
</div>
    

  </div>
  <div id="comments">
      
<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "dorneanu" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

  </div>
</main>
 








<div class="pagination tc tr-l db fixed-l bottom-2-l right-2-l mb3 mb0-l">
  
<a id="scroll-to-top" class="f6 o-0 link br2 ph2 pv1 mb1 bg-main-color pointer" onclick="topFunction()" style="color: #fff; visibility: hidden; display: none; transition: opacity .5s, visibility .5s;" title="back to top">back to top</a>
<br>
  <p class="mb0 mt2">
  <a href="https://blog.dornea.nu/2009/08/20/netbsd-kernel-downgrade-and-some-voodoo/">prev</a>
  <a href="https://blog.dornea.nu/2009/09/15/some-drupal-peculiarities/">next</a>
  </p>
</div>

  <footer class="content-width mt0 mt5-l mb4 f6 center ph3 gray tc tl-l">
  <hr class="dn db-l ml0-l gray w3"><br>
  Powered by <a href="https://gohugo.io/" target="_blank" class="link gray dim">Hugo</a>, based on the <a href="https://github.com/lingxz/er" target="_blank" class="link gray dim">Er</a> theme.
  2009-2022 Victor Dorneanu - All rights reserved
  <a href="https://blog.dornea.nu/feed.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a>
</footer>

  






<script type="text/javascript">
var prevScrollpos = window.pageYOffset;
window.onscroll = function() {
  var currentScrollPos = window.pageYOffset;

  
  if (document.getElementById("tag-cloud") !== null) { 
    if (prevScrollpos > currentScrollPos) { 
      document.getElementById("tag-cloud").style.visibility = "visible";
      document.getElementById("tag-cloud").style.opacity = "1";
    } else {
      document.getElementById("tag-cloud").style.visibility = "hidden";
      document.getElementById("tag-cloud").style.opacity = "0";
    }
  }
  

  
  if (document.body.scrollTop > 1000 || document.documentElement.scrollTop > 1000) {
      document.getElementById("scroll-to-top").style.display = "inline";
      document.getElementById("scroll-to-top").style.visibility = "visible";
      document.getElementById("scroll-to-top").style.opacity = "1";
  } else {
      document.getElementById("scroll-to-top").style.visibility = "hidden";
      document.getElementById("scroll-to-top").style.opacity = "0";
  }
  
  prevScrollpos = currentScrollPos;
}


function topFunction() {
  document.body.scrollTop = 0; 
  document.documentElement.scrollTop = 0; 
}







</script>





<script>
 var glightbox = GLightbox({
     selector: '.glightbox'
 });
</script>

  
</body>
</html>
