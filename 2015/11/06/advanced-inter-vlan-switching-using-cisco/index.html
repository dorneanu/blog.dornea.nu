<!doctype html>
<html lang="en">
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta content='text/html; charset=utf-8' http-equiv='content-type' />

  <title>Advanced inter VLAN switching using Cisco - blog.dornea.nu</title>
  <meta content='Advanced inter VLAN switching using Cisco - blog.dornea.nu' property='title' />
  <meta content='Advanced inter VLAN switching using Cisco - blog.dornea.nu' property='og:title' />


<meta property="og:description" content="Continuing my CCNA journey I&rsquo;d like to address inter VLAN switching in a more detailed way. In this post I&rsquo;ll configure my previous topology to use VTP and let STP prevent frame looping and other &ldquo;anomalies&rdquo; on Layer 2.
Updated network topology %%blockdiag # &lt;!-- collapse=True --&gt; diagram admin {↔ PC1 [shape = &#34;cisco.pc&#34;]; PC2 [shape = &#34;cisco.pc&#34;]; PC3 [shape = &#34;cisco.pc&#34;]; PC4 [shape = &#34;cisco.pc&#34;]; PC5 [shape = &#34;cisco.pc&#34;]; PC6 [shape = &#34;cisco." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.dornea.nu/2015/11/06/advanced-inter-vlan-switching-using-cisco/" />


<meta property="article:published_time" content="2015-11-06T00:00:00&#43;00:00"/>

<meta property="article:modified_time" content="2015-11-06T00:00:00&#43;00:00"/>








<meta name="generator" content="Hugo 0.89.4" />

<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" rel="stylesheet">
<style type="text/css">/*https://coolors.co/afd5aa-f0f2ef-a69f98-3d3d3d-8c6057*/
:root {
  --main-color: #8C6056; 
  --secondary-color: #AFD5AA;
  --logo-text-color: #fff;
  --body-text-color: #3d3d3d;
  --heading-text-color: #383838;
  --background-color: #fff;
}</style>
<link href='https://blog.dornea.nu/css/tachyons.min.css' rel="stylesheet">
<link href='https://blog.dornea.nu/css/styles.css' rel="stylesheet">
<link rel="stylesheet" href="https://blog.dornea.nu/css/custom.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" />
<script src="https://cdn.jsdelivr.net/gh/mcstudios/glightbox/dist/js/glightbox.min.js"></script>


<link rel="icon" 
 
  href='https://blog.dornea.nu/favicon.ico'

type="image/x-icon"/>

<link href='https://blog.dornea.nu/feed.xml' rel="alternate" type="application/atom+xml" title="blog.dornea.nu" />

</head>
<body class="global-font">
  <nav class=" flex-ns justify-between border-box pa3 pl3-l pr2-l mt1 mt0-ns" id="navbar">
  <div class="flex">
    <a class="f4 fw6 ttu no-underline dim bg-main-color pv1 ph2 br2" id="site-title" href='https://blog.dornea.nu/' title="Home">blog.dornea.nu</a>
  </div>
  
  <div class=" flex-ns mt2 mt0-ns pv1">
    
      <a class="link dim dark-gray f6 dib mr2 mr3-l ttu tracked" href='https://blog.dornea.nu/' title="Home">Home</a>
    
      <a class="link dim dark-gray f6 dib mr2 mr3-l ttu tracked" href='http://dornea.nu' title="About">About</a>
    
      <a class="link dim dark-gray f6 dib mr2 mr3-l ttu tracked" href='https://blog.dornea.nu/feed.xml' title="RSS">RSS</a>
    
      <a class="link dim dark-gray f6 dib mr2 mr3-l ttu tracked" href='https://blog.dornea.nu/tags' title="Tags">Tags</a>
    
      <a class="link dim dark-gray f6 dib mr2 mr3-l ttu tracked" href='https://brainfck.org' title="Zettelkasten">Zettelkasten</a>
    
  </div>
  
</nav>
  
<main class="center mv4 content-width ph3">
  <div class="f3 fw6 heading-color heading-font post-title">Advanced inter VLAN switching using Cisco</div>
  <p class="silver f6 mt1 mb4 post-meta">
    <time>06 Nov 2015</time> 
     | 
    
    
    tags: [ <a href='https://blog.dornea.nu/tags/networking' class="link silver">networking</a> <a href='https://blog.dornea.nu/tags/cisco' class="link silver">cisco</a> <a href='https://blog.dornea.nu/tags/ccna' class="link silver">ccna</a> <a href='https://blog.dornea.nu/tags/layer-2' class="link silver">layer 2</a> <a href='https://blog.dornea.nu/tags/switch' class="link silver">switch</a> <a href='https://blog.dornea.nu/tags/vlan' class="link silver">vlan</a> <a href='https://blog.dornea.nu/tags/vtp' class="link silver">vtp</a> <a href='https://blog.dornea.nu/tags/stp' class="link silver">stp</a> <a href='https://blog.dornea.nu/tags/ipython' class="link silver">ipython</a> <a href='https://blog.dornea.nu/tags/admin' class="link silver">admin</a>  ]
    
  </p>
  <div class="lh-copy post-content"><p>Continuing my <a href="http://blog.dornea.nu/tag/ccna/">CCNA</a> journey I&rsquo;d like to address <em>inter VLAN switching</em> in a more detailed way. In this post I&rsquo;ll configure my <a href="http://blog.dornea.nu/2015/10/21/basic-layer-2-switching-using-cisco-packet-tracer/">previous topology</a> to use <strong>VTP</strong> and let <strong>STP</strong> prevent <em>frame looping</em> and other &ldquo;anomalies&rdquo; on <em>Layer 2</em>.</p>
<h2 id="updated-network-topology">Updated network topology</h2>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">%%blockdiag
<span style="color:#999;font-style:italic"># &lt;!-- collapse=True --&gt;</span>
diagram admin {<span style="color:#a61717;background-color:#e3d2d2">↔</span>

    PC1 [shape = <span style="color:#ed9d13">&#34;cisco.pc&#34;</span>];
    PC2 [shape = <span style="color:#ed9d13">&#34;cisco.pc&#34;</span>];
    PC3 [shape = <span style="color:#ed9d13">&#34;cisco.pc&#34;</span>];
    PC4 [shape = <span style="color:#ed9d13">&#34;cisco.pc&#34;</span>];
    PC5 [shape = <span style="color:#ed9d13">&#34;cisco.pc&#34;</span>];
    PC6 [shape = <span style="color:#ed9d13">&#34;cisco.pc&#34;</span>];

    SW4 &lt;-&gt; SW1, SW2, SW3 [color = <span style="color:#ed9d13">&#34;red&#34;</span>, style=<span style="color:#ed9d13">&#34;dotted&#34;</span>];
    SW1 &lt;-&gt; SW2 [folded];
    SW2 &lt;-&gt; SW3 [folded];
    
    
    group {
        label = <span style="color:#ed9d13">&#34;VLAN 10&#34;</span>;
        color = <span style="color:#ed9d13">&#34;#FFF&#34;</span>;
        SW1 &lt;-&gt; PC1;
        SW1 &lt;-&gt; PC2;
    }
    
    group {
        label = <span style="color:#ed9d13">&#34;VLAN 20&#34;</span>;
        color = <span style="color:#ed9d13">&#34;#FFF&#34;</span>;
        SW2 &lt;-&gt; PC3;
        SW2 &lt;-&gt; PC4;
    }
    
    group {
        label = <span style="color:#ed9d13">&#34;VLAN 10 + VLAN 20&#34;</span>;
        color = <span style="color:#ed9d13">&#34;#FFF&#34;</span>;
        SW3 &lt;-&gt; PC5;
        SW3 &lt;-&gt; PC6;
    }
}
</code></pre></div><p><img src="https://blog.dornea.nu/posts/img/2015/advanced-inter-vlan-switching-using-cisco/output_2_0.png" alt="png"></p>
<p>The new added component <code>SW4</code> is connected to all other switches (red lines). Since a new switch has been added we&rsquo;ll have to add the existing <strong>VLANs</strong> to the corresponding interfaces as well. But this time I <strong>won&rsquo;t</strong> configure the ports manually. Instead I&rsquo;ll use a Cisco proprietary protocol called <code>VTP</code> to exchange information about VLAN accross all available switches. So called <code>VTP</code> advertisements can be sent over <code>ISL</code> or <code>802.1Q</code> (dot1q). Now let&rsquo;s have a look at the process of adding <code>VTP</code> to the existing infrastructure.</p>
<h2 id="vlan-trunking-protocol">VLAN Trunking Protocol</h2>
<p><code>VTP</code> has 3 operation modes:</p>
<ul>
<li>VTP <strong>server</strong> mode
<ul>
<li><strong>By default</strong> all Cisco switches are in server mode</li>
<li>VLANs are stored on a device in a file called <code>vlan.dat</code></li>
<li>In server mode changes to the file are allowed</li>
<li>These changes/modifications are carried down to the clients as VTP advertisements</li>
</ul>
</li>
<li>VTP <strong>client</strong> mode
<ul>
<li>Will listen to the changes sent by the server and apply the changes</li>
<li>Is <strong>not</strong> allowed to modify the file <code>vlan.dat</code></li>
</ul>
</li>
<li>VTP <strong>transparent</strong> mode
<ul>
<li>Will relay/forward VTP advertisemnts to downstream clients</li>
<li>BUT will <strong>not</strong> apply the changes</li>
<li><strong>IS</strong> allowed to add/delete VLANs</li>
<li><strong>CAN</strong> modify its <code>vlan.dat</code></li>
</ul>
</li>
</ul>
<p>For my purpose I&rsquo;ll chose following setup:</p>
<ul>
<li><code>SW1</code> in VTP <strong>server</strong> mode</li>
<li>all <strong>others</strong> switches in <strong>client</strong> mode</li>
</ul>
<h3 id="configure-sw1">Configure SW1</h3>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.bash" data-lang=".bash">SW1&gt;enable
Password: 
SW1#conf t
Enter configuration commands, one per line.  End with CNTL/Z.
SW1(config)<span style="color:#999;font-style:italic">#vtp mode server</span>
Device mode already VTP SERVER.

SW1(config)<span style="color:#999;font-style:italic">#vtp domain ccna-lab</span>
Changing VTP domain name from NULL to ccna-lab

SW1(config)<span style="color:#999;font-style:italic">#vtp password ccna</span>
Setting device VLAN database password to ccna

SW1(config)<span style="color:#999;font-style:italic">#vtp version 2</span>

SW1(config)<span style="color:#999;font-style:italic">#do show vtp status</span>
VTP Version                     : <span style="color:#3677a9">2</span>
Configuration Revision          : <span style="color:#3677a9">6</span>
Maximum VLANs supported locally : <span style="color:#3677a9">255</span>
Number of existing VLANs        : <span style="color:#3677a9">8</span>
VTP Operating Mode              : Server
VTP Domain Name                 : ccna-lab
VTP Pruning Mode                : Disabled
VTP V2 Mode                     : Disabled
VTP Traps Generation            : Disabled
MD5 digest                      : 0x8D 0xCD 0x81 0x32 0xF5 0xBA 0x71 0x33 
Configuration last modified by 0.0.0.0 at 3-1-93 01:14:24
Local updater ID is 30.30.30.1 on interface Vl30 (lowest numbered VLAN interface found)
</code></pre></div><h3 id="configure-vtp-clients">Configure VTP clients</h3>
<p>The configuration of the remaining switches is pretty straight-forward. Let&rsquo;s have a look at an example (in this case <code>SW2</code>):</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.bash" data-lang=".bash">SW2#conf t
Enter configuration commands, one per line.  End with CNTL/Z.
SW2(config)<span style="color:#999;font-style:italic">#vtp domain ccna-lab</span>
Domain name already <span style="color:#24909d">set</span> to ccna-lab.

SW2(config)<span style="color:#999;font-style:italic">#vtp pass ccna</span>
Setting device VLAN database password to ccna

SW2(config)<span style="color:#999;font-style:italic">#vtp mode client</span>
Setting device to VTP CLIENT mode.

SW2(config)<span style="color:#999;font-style:italic">#do show vtp status</span>
VTP Version                     : <span style="color:#3677a9">2</span>
Configuration Revision          : <span style="color:#3677a9">7</span>
Maximum VLANs supported locally : <span style="color:#3677a9">255</span>
Number of existing VLANs        : <span style="color:#3677a9">8</span>
VTP Operating Mode              : Client
VTP Domain Name                 : ccna-lab
VTP Pruning Mode                : Disabled
VTP V2 Mode                     : Disabled
VTP Traps Generation            : Disabled
MD5 digest                      : 0xD4 0x40 0x89 0x49 0x1A 0x6E 0x7A 0xBE 
Configuration last modified by 30.30.30.1 at 3-1-93 01:04:21
</code></pre></div><h3 id="testing-setup">Testing setup</h3>
<p>In order to test the configuration I&rsquo;ll add <strong>VLAN 40</strong> (Testing) on <code>SW1</code> and check if that gets advertised:</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.bash" data-lang=".bash">SW1(config)<span style="color:#999;font-style:italic">#vlan 40</span>
SW1(config-vlan)<span style="color:#999;font-style:italic">#name Testing</span>
</code></pre></div><p>Right after we verify if the clients got the VTP advertisements:</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.bash" data-lang=".bash">SW4#sh vlan brief

VLAN Name                             Status    Ports
...  
<span style="color:#3677a9">40</span>   Testing                          active    
...
</code></pre></div><p>If I again delete <strong>VLAN 40</strong> from <code>SW1</code> then the clients should delete it as well:</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.bash" data-lang=".bash">SW1(config)<span style="color:#999;font-style:italic">#no vlan 40</span>
</code></pre></div><p>And now test it:</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.bash" data-lang=".bash">SW2#sh vlan brief

VLAN Name                             Status    Ports
---- -------------------------------- --------- -------------------------------
<span style="color:#3677a9">1</span>    default                          active    Fa0/6, Fa0/7, Fa0/8, Fa0/9
                                                Fa0/10, Fa0/11, Fa0/12, Fa0/13
                                                Fa0/14, Fa0/15, Fa0/16, Fa0/17
                                                Fa0/18, Fa0/19, Fa0/20, Fa0/21
                                                Fa0/22, Fa0/23, Fa0/24, Gig0/1
                                                Gig0/2
<span style="color:#3677a9">10</span>   Students                         active    
<span style="color:#3677a9">20</span>   Teachers                         active    Fa0/3, Fa0/4
<span style="color:#3677a9">30</span>   Management                       active    
<span style="color:#3677a9">1002</span> fddi-default                     active    
<span style="color:#3677a9">1003</span> token-ring-default               active    
<span style="color:#3677a9">1004</span> fddinet-default                  active    
<span style="color:#3677a9">1005</span> trnet-default                    active    
</code></pre></div><h2 id="spanning-tree-protocol">Spanning Tree Protocol</h2>
<p>Since we now have to deal with <strong>interconnected</strong> switches and <em>frame looping</em> might be an issue, activating <strong>STP</strong> (Spanning Tree Protocol) will help mitigate the impacts of <em>broadcast storms</em> or <em>multiple frame tranmissions</em>. Cisco devices usually use <strong>Per VLAN Spanning Tree Protocol</strong> (PVST+, PVSTP) which is <em>proprietary</em>. The biggest difference to the &ldquo;normal&rdquo; STP (<strong>802.1D</strong>) is that PVST+ creates a different topology <em>per VLAN</em>. That means you can elect different roots (and thus different topology) for every available VLAN. Let&rsquo;s have a look at the desired topology for <code>VLAN 30</code> (Management):</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">%%blockdiag
<span style="color:#999;font-style:italic"># &lt;!-- collapse=True --&gt;</span>
diagram admin {<span style="color:#a61717;background-color:#e3d2d2">↔</span>


    group {
        label = <span style="color:#ed9d13">&#34;VLAN 30 (Management)&#34;</span>
        orientation = portrait;
        color = <span style="color:#ed9d13">&#34;#FFF&#34;</span>
        SW4 &lt;-&gt; SW1, SW2, SW3;
        SW1 &lt;-&gt; SW2 [folded];
        SW2 &lt;-&gt; SW3 [folded];
    }
}
</code></pre></div><p><img src="https://blog.dornea.nu/posts/img/2015/advanced-inter-vlan-switching-using-cisco/output_8_0.png" alt="png"></p>
<h3 id="roots-election">Root(s) election</h3>
<p>In terms of <strong>STP</strong> <code>SW4</code> will be the <strong>p</strong>rimary (p) and <code>SW2</code> the <strong>s</strong>econdary (s) root. Let&rsquo;s configure <code>Sw4</code> and <code>Sw2</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.bash" data-lang=".bash">! SW4 configuration
SW4(config)<span style="color:#999;font-style:italic">#spanning-tree vlan 30 root primary</span>

! SW2 configuration
SW2(config)<span style="color:#999;font-style:italic">#spanning-tree vlan 30 root secondary</span>
</code></pre></div><p>And now let&rsquo;s have a look at the <strong>port connectivity</strong> matrix:</p>
<!-- raw HTML omitted -->
<p>So <code>SW1</code> (Fa0/1) is connected to <code>SW2</code> (Fa0/1), <code>SW3</code> (Fa0/3) is connected to <code>SW2</code> (Fa0/2) and so on. You may have noticed that <code>SW3</code> and <code>SW4</code> are connected to each other using <strong>4 ports</strong>. In that case we have a <em>redundant</em> connection between both switches. In this case we&rsquo;ll later on configure the redundant connection as an <a href="https://en.wikipedia.org/wiki/EtherChannel"><strong>EtherChannel</strong></a>.</p>
<h3 id="testing-the-stp-configuration">Testing the STP configuration</h3>
<p>And now let&rsquo;s have a look at the STP information:</p>
<ul>
<li><code>SW2</code> (secondary root)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.bash" data-lang=".bash">SW2#sh spanning-tree vlan <span style="color:#3677a9">30</span>
VLAN0030
  Spanning tree enabled protocol ieee
  Root ID    Priority    <span style="color:#3677a9">20510</span>
             Address     00E0.F96C.2E07
             Cost        <span style="color:#3677a9">19</span>
             Port        5(FastEthernet0/5)
             Hello Time  <span style="color:#3677a9">2</span> sec  Max Age <span style="color:#3677a9">20</span> sec  Forward Delay <span style="color:#3677a9">15</span> sec

  Bridge ID  Priority    <span style="color:#3677a9">28702</span>  (priority <span style="color:#3677a9">28672</span> sys-id-ext 30)
             Address     0030.F222.3EE5
             Hello Time  <span style="color:#3677a9">2</span> sec  Max Age <span style="color:#3677a9">20</span> sec  Forward Delay <span style="color:#3677a9">15</span> sec
             Aging Time  <span style="color:#3677a9">20</span>

Interface        Role Sts Cost      Prio.Nbr Type
---------------- ---- --- --------- -------- --------------------------------
Fa0/1            Desg FWD <span style="color:#3677a9">19</span>        128.1    P2p
Fa0/2            Altn BLK <span style="color:#3677a9">19</span>        128.2    P2p
Fa0/5            Root FWD <span style="color:#3677a9">19</span>        128.5    P2p
</code></pre></div><p>We can notice that:</p>
<ol>
<li>The root has a MAC address of <code>00E0.F96C.2E07</code></li>
<li><code>FastEthernet 0/5</code> is the <strong>root port</strong> with a <strong>cost</strong> of 19 and is in <strong>forwarding</strong> state</li>
<li><code>FastEthernet 0/2</code> is in <strong>blocking</strong> state</li>
<li><code>FastEthernet 0/1</code> is the <strong>designated</strong> port</li>
</ol>
<ul>
<li><code>SW4</code> (primary root)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.bash" data-lang=".bash">SW4#sh spanning-tree vlan <span style="color:#3677a9">30</span> 
VLAN0030
  Spanning tree enabled protocol ieee
  Root ID    Priority    <span style="color:#3677a9">20510</span>
             Address     00E0.F96C.2E07
             This bridge is the root
             Hello Time  <span style="color:#3677a9">2</span> sec  Max Age <span style="color:#3677a9">20</span> sec  Forward Delay <span style="color:#3677a9">15</span> sec

  Bridge ID  Priority    <span style="color:#3677a9">20510</span>  (priority <span style="color:#3677a9">20480</span> sys-id-ext 30)
             Address     00E0.F96C.2E07
             Hello Time  <span style="color:#3677a9">2</span> sec  Max Age <span style="color:#3677a9">20</span> sec  Forward Delay <span style="color:#3677a9">15</span> sec
             Aging Time  <span style="color:#3677a9">20</span>

Interface        Role Sts Cost      Prio.Nbr Type
---------------- ---- --- --------- -------- --------------------------------
Fa0/1            Desg FWD <span style="color:#3677a9">19</span>        128.1    P2p
Fa0/3            Desg FWD <span style="color:#3677a9">19</span>        128.3    P2p
Po1              Desg FWD <span style="color:#3677a9">9</span>         128.27   Shr
</code></pre></div><p>We can notice that:</p>
<ol>
<li>This is indeed the root (<strong>&ldquo;This bridge is the root&rdquo;</strong>)</li>
<li>All available ports are <strong>designated</strong> and in <strong>forwarding</strong> state (the root has <strong>no</strong> root port)</li>
</ol>
<ul>
<li><code>SW3</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.bash" data-lang=".bash">SW3#sh spanning-tree vlan <span style="color:#3677a9">30</span> 
VLAN0030
  Spanning tree enabled protocol ieee
  Root ID    Priority    <span style="color:#3677a9">20510</span>
             Address     00E0.F96C.2E07
             Cost        <span style="color:#3677a9">9</span>
             Port        27(Port-channel 2)
             Hello Time  <span style="color:#3677a9">2</span> sec  Max Age <span style="color:#3677a9">20</span> sec  Forward Delay <span style="color:#3677a9">15</span> sec

  Bridge ID  Priority    <span style="color:#3677a9">32798</span>  (priority <span style="color:#3677a9">32768</span> sys-id-ext 30)
             Address     0003.E481.688D
             Hello Time  <span style="color:#3677a9">2</span> sec  Max Age <span style="color:#3677a9">20</span> sec  Forward Delay <span style="color:#3677a9">15</span> sec
             Aging Time  <span style="color:#3677a9">20</span>

Interface        Role Sts Cost      Prio.Nbr Type
---------------- ---- --- --------- -------- --------------------------------
Fa0/1            Desg FWD <span style="color:#3677a9">19</span>        128.1    P2p
Po2              Root FWD <span style="color:#3677a9">9</span>         128.27   Shr
</code></pre></div><p>We can notice that:</p>
<ol>
<li><code>Po2</code> is the <strong>root port</strong> with a cost of 9 and in <strong>forwarding</strong> state</li>
<li><code>FastEthernet 0/1</code> is a <strong>designated</strong> port with a cost of 19 and in <strong>forwarding</strong> state</li>
</ol>
<h3 id="port-cost">Port cost</h3>
<p>Now you may have noticed the diffrent <strong>port costs</strong>. A port cost is an integer assigned to each interface per VLAN for providing a good way for measuring a port&rsquo;s connectivity.</p>
<!-- raw HTML omitted -->
<p>So because most of the ports are <em>FastEthernet</em> ports they will get a port cost of 19 (when connected directly to the root).</p>
<h3 id="etherchannel">EtherChannel</h3>
<p>As previosuly mentioned there are 2 port links between <code>SW3</code> and <code>SW4</code>. <strong>EtherChannel</strong> provides a way to prevent convergence (STP) when a single port or cable failure occurs. The switches will treat the EtherChannel as a single interface. The big advantage is that if one of the links fails, STP convergence does not have to occur if at least one of the links is up. Besides that the switches will now have a <strong>load-balancing</strong> effect which will spread the traffic load accross the active links in the (Ether)channel.</p>
<h4 id="manual-etherchannel">Manual EtherChannel</h4>
<p>So when using EtherChannels STP will operate on the EtherChannel itself rather than on the individual physical links. STP will then either forward or block traffic on the entire logical EtherChannel for a specific VLAN. Probably the most simple way to activate EtherChannel is to put the physical interfaces into the same <strong>channel-group</strong>. Let&rsquo;s have a look how this is done:</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.bash" data-lang=".bash">SW3(config)<span style="color:#999;font-style:italic">#int f0/4</span>
SW3(config-if)<span style="color:#999;font-style:italic">#channel-group 1 mode on</span>
SW3(config-if)<span style="color:#999;font-style:italic">#</span>
%LINK-5-CHANGED: Interface Port-channel 1, changed state to up

%LINEPROTO-5-UPDOWN: Line protocol on Interface Port-channel 1, changed state to up

SW3(config-if)<span style="color:#999;font-style:italic">#int f0/5</span>
SW3(config-if)<span style="color:#999;font-style:italic">#channel-group 1 mode on</span>
SW3(config-if)<span style="color:#999;font-style:italic">#</span>
%LINK-5-CHANGED: Interface Port-channel 2, changed state to down

%LINEPROTO-5-UPDOWN: Line protocol on Interface Port-channel 2, changed state to down
</code></pre></div><p>And now for <code>SW4</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.bash" data-lang=".bash">SW4(config)<span style="color:#999;font-style:italic">#int f0/2</span>
SW4(config-if)<span style="color:#999;font-style:italic">#channel-group 2 mode on</span>
SW4(config-if)<span style="color:#999;font-style:italic">#</span>
%LINK-5-CHANGED: Interface Port-channel 2, changed state to up

%LINEPROTO-5-UPDOWN: Line protocol on Interface Port-channel 2, changed state to up

SW4(config-if)<span style="color:#999;font-style:italic">#int f0/4</span>
SW4(config-if)<span style="color:#999;font-style:italic">#channel-group 2 mode on</span>
SW4(config-if)<span style="color:#999;font-style:italic">#</span>
%LINK-5-CHANGED: Interface Port-channel 1, changed state to down

%LINEPROTO-5-UPDOWN: Line protocol on Interface Port-channel 1, changed state to down
</code></pre></div><h4 id="dynamically-configured-etherchannel">Dynamically configured EtherChannel</h4>
<p>If you don&rsquo;t want to manually configure the EtherChannel, one can let the switches <em>negotiate</em> the configuration for it. Cisco switches support</p>
<ul>
<li>Cisco proprietary Port Aggregation Protocol (<strong>PAgP</strong>)
<ul>
<li>Enabled by the keywords <strong>desirable</strong> and <strong>auto</strong></li>
</ul>
</li>
<li>IEEE standard Link Aggregation Control Protocol (<strong>LACP</strong>)
<ul>
<li>Enabled by the keywords <strong>passive</strong> and <strong>active</strong></li>
</ul>
</li>
</ul>
<p>So when using <strong>PAgP</strong> at least one side must use <strong>desirable</strong> or <strong>active</strong> when using <strong>LACP</strong>. Let&rsquo;s have some look at one example (PAgP):</p>
<ul>
<li><code>SW3</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.bash" data-lang=".bash">SW3(config)<span style="color:#999;font-style:italic">#int f0/4</span>
SW3(config-if)<span style="color:#999;font-style:italic">#channel-group 2 mode desirable</span>
SW3(config-if)<span style="color:#999;font-style:italic">#int f0/5</span>
SW3(config-if)<span style="color:#999;font-style:italic">#channel-group 2 mode desirable</span>
</code></pre></div><ul>
<li><code>SW4</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.bash" data-lang=".bash">SW4(config)<span style="color:#999;font-style:italic">#int f0/2</span>
SW4(config-if)<span style="color:#999;font-style:italic">#channel-group 1 mode auto</span>
SW4(config-if)<span style="color:#999;font-style:italic">#int f0/5</span>
SW4(config-if)<span style="color:#999;font-style:italic">#channel-group 1 mode auto</span>
</code></pre></div><h3 id="testing-etherchannel-connectivity">Testing EtherChannel connectivity</h3>
<p>Now let&rsquo;s see of the <em>port channels</em> are working well:</p>
<ul>
<li><code>SW4</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.bash" data-lang=".bash">SW4#sh eth sum
Flags:  D - down        P - in port-channel
        I - stand-alone s - suspended
        H - Hot-standby (LACP only)
        R - Layer3      S - Layer2
        U - in use      f - failed to allocate aggregator
        u - unsuitable <span style="color:#6ab825;font-weight:bold">for</span> bundling
        w - waiting to be aggregated
        d - default port


Number of channel-groups in use: <span style="color:#3677a9">2</span>
Number of aggregators:           <span style="color:#3677a9">2</span>

Group  Port-channel  Protocol    Ports
------|-------------|-----------|----------------------------------------------

<span style="color:#3677a9">1</span>      Po1(SU)           -      Fa0/4(P) Fa0/2(P) 
<span style="color:#3677a9">2</span>      Po2(SD)           -      
</code></pre></div><p>As you can see there is a port-channel <code>Po1</code> consisting of <code>Fa0/2</code> and <code>Fa0/4</code>. The port.channel is also working and in use.</p>
<ul>
<li><code>SW3</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.bash" data-lang=".bash">SW3#sh eth sum
Flags:  D - down        P - in port-channel
        I - stand-alone s - suspended
        H - Hot-standby (LACP only)
        R - Layer3      S - Layer2
        U - in use      f - failed to allocate aggregator
        u - unsuitable <span style="color:#6ab825;font-weight:bold">for</span> bundling
        w - waiting to be aggregated
        d - default port


Number of channel-groups in use: <span style="color:#3677a9">2</span>
Number of aggregators:           <span style="color:#3677a9">2</span>

Group  Port-channel  Protocol    Ports
------|-------------|-----------|----------------------------------------------

<span style="color:#3677a9">1</span>      Po1(SD)           -      
<span style="color:#3677a9">2</span>      Po2(SU)           -      Fa0/4(P) Fa0/5(P) 
</code></pre></div><p>Again <code>Po2</code> is a working port-channel and consists of <code>Fa0/4</code> and <code>Fa0/5</code>.
You also should have noticed that the ports on each switch belong to different channel groups. You can now treat <code>Po1</code> and <code>Po2</code> as interfaces, bring them up or down. If your port-channel is down, do following:</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.bash" data-lang=".bash">SW4(config)<span style="color:#999;font-style:italic">#int Po1</span>
SW4(config-if)<span style="color:#999;font-style:italic">#no shutdown </span>
</code></pre></div><p>You can also add <strong>VLANs</strong> to it:</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.bash" data-lang=".bash">SW4(config-if)<span style="color:#999;font-style:italic">#switchport mode trunk</span>
SW4(config-if)<span style="color:#999;font-style:italic">#switchport trunk allowed vlan 10,20,30</span>
</code></pre></div><p>Afterwards you should be able to verify that:</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.bash" data-lang=".bash">SW4#sh int trunk
Port        Mode         Encapsulation  Status        Native vlan
Fa0/1       on           802.1q         trunking      <span style="color:#3677a9">1</span>
Fa0/3       on           802.1q         trunking      <span style="color:#3677a9">1</span>
Po1         on           802.1q         trunking      <span style="color:#3677a9">1</span>

Port        Vlans allowed on trunk
Fa0/1       10,20,30
Fa0/3       10,20,30
Po1         10,20,30

Port        Vlans allowed and active in management domain
Fa0/1       10,20,30
Fa0/3       10,20,30
Po1         10,20,30

Port        Vlans in spanning tree forwarding state and not pruned
Fa0/1       10,20,30
Fa0/3       10,20,30
Po1         10,20,30
</code></pre></div><h2 id="troubleshooting">Troubleshooting</h2>
<p>Although this is not a complex topology, adding STP to your switches, might increase the troubleshooting steps needed to localize your problem. In my particular case I was able to ping from <code>PC3</code> to <code>PC6</code>, however <code>PC1</code> wasn&rsquo;t able to reach <code>PC5</code>. After eliminating a list of might-be problems like:</p>
<ul>
<li>port security</li>
<li>misconfigured trunk ports</li>
<li>wrong VLANs</li>
<li>missing IP addresses</li>
</ul>
<p>I was able to nail down the problem using STP related information. Furthermore it turned out that the <strong>EtherChannel</strong> was not working at all, causing certain frames to be dropped without reaching their final destination. So how might one <em>guess</em> how data would be routed based on output from the <code>show</code> commands?</p>
<p>Let&rsquo;s suppose <code>PC1</code> (10.10.10.101) cannot reach <code>PC5</code> (10.10.10.105). Also keep in mind that both hosts belong to the same <strong>VLAN</strong> (10 = Students). Our simplified topology would look like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">%%dot
<span style="color:#999;font-style:italic"># &lt;!-- collapse=True --&gt;↔</span>

     SW1 -- SW2 [<span style="color:#24909d">dir</span>=both, label = <span style="color:#ed9d13">&#34;Fa0/1 - Fa0/1&#34;</span>, arrowhead=normal];
     SW2 -- SW3 [<span style="color:#24909d">dir</span>=both, label = <span style="color:#ed9d13">&#34;Fa0/2 - Fa0/1&#34;</span>, arrowhead=normal];

     SW4 -- SW1 [<span style="color:#24909d">dir</span>=both, label = <span style="color:#ed9d13">&#34;Fa0/4 - Fa0/1&#34;</span>];
     SW4 -- SW2 [<span style="color:#24909d">dir</span>=both,label = <span style="color:#ed9d13">&#34;Fa0/3 - Fa0/5&#34;</span>];
     SW4 -- SW3 [<span style="color:#24909d">dir</span>=both,label = <span style="color:#ed9d13">&#34;Po1 - Po2&#34;</span>, arrowhead=normal];
    
     PC1 [label = <span style="color:#ed9d13">&#34;PC1 [.101]&#34;</span>];
     PC4 [label = <span style="color:#ed9d13">&#34;PC5 [.105]&#34;</span>];
        
     SW1 -- PC1 [<span style="color:#24909d">dir</span>=both, label = <span style="color:#ed9d13">&#34;Fa0/2 - Fa0&#34;</span>];
     SW3 -- PC4 [<span style="color:#24909d">dir</span>=both, label = <span style="color:#ed9d13">&#34;Fa0/3 - Fa0&#34;</span>];

     {rank = same; SW1; SW2; SW3;}
     {rank = same; PC1; PC4;}
 }
</code></pre></div><p><img src="output_13_0.svg" alt="svg"></p>
<p>There are several way how frames from <code>PC1</code> would reach <code>PC5</code>. However when dealing with <strong>STP</strong> some ports will in be <strong>blocking</strong> state. Let&rsquo;s check that out:</p>
<ul>
<li><code>SW1</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.bash" data-lang=".bash">SW1#sh spanning-tree vlan <span style="color:#3677a9">10</span>
VLAN0010
...

Interface        Role Sts Cost      Prio.Nbr Type
---------------- ---- --- --------- -------- --------------------------------
Fa0/1            Altn BLK <span style="color:#3677a9">19</span>        128.1    P2p
Fa0/2            Desg FWD <span style="color:#3677a9">19</span>        128.2    P2p
Fa0/3            Desg FWD <span style="color:#3677a9">19</span>        128.3    P2p
Fa0/4            Root FWD <span style="color:#3677a9">19</span>        128.4    P2p
</code></pre></div><ul>
<li><code>SW2</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.bash" data-lang=".bash">SW2#sh spanning-tree vlan <span style="color:#3677a9">10</span>
VLAN0010
...

Interface        Role Sts Cost      Prio.Nbr Type
---------------- ---- --- --------- -------- --------------------------------
Fa0/1            Desg FWD <span style="color:#3677a9">19</span>        128.1    P2p
Fa0/2            Root FWD <span style="color:#3677a9">19</span>        128.2    P2p
Fa0/5            Altn BLK <span style="color:#3677a9">19</span>        128.5    P2p
Fa0/6            Desg FWD <span style="color:#3677a9">19</span>        128.6    P2p
</code></pre></div><ul>
<li><code>SW3</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.bash" data-lang=".bash">SW3#sh spanning-tree vlan <span style="color:#3677a9">10</span>
...

Interface        Role Sts Cost      Prio.Nbr Type
---------------- ---- --- --------- -------- --------------------------------
Fa0/1            Desg FWD <span style="color:#3677a9">19</span>        128.1    P2p
Fa0/3            Desg FWD <span style="color:#3677a9">19</span>        128.3    P2p
Po2              Desg FWD <span style="color:#3677a9">9</span>         128.27   Shr
</code></pre></div><ul>
<li><code>SW4</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-.bash" data-lang=".bash">SW4#sh spanning-tree vlan <span style="color:#3677a9">10</span>
...

Interface        Role Sts Cost      Prio.Nbr Type
---------------- ---- --- --------- -------- --------------------------------
Fa0/1            Desg FWD <span style="color:#3677a9">19</span>        128.1    P2p
Fa0/3            Desg FWD <span style="color:#3677a9">19</span>        128.3    P2p
Fa0/5            Desg FWD <span style="color:#3677a9">19</span>        128.5    P2p
Po1              Root FWD <span style="color:#3677a9">9</span>         128.27   Shr
</code></pre></div><p>Based of the previous outputs our topology now looks like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">%%dot
<span style="color:#999;font-style:italic"># &lt;!-- collapse=True --&gt;↔</span>

     SW1 -- SW2 [<span style="color:#24909d">dir</span>=both, arrowtail=box];
     SW2 -- SW3 [<span style="color:#24909d">dir</span>=both, arrowhead=normal];

     SW4 -- SW1 [<span style="color:#24909d">dir</span>=both];
     SW4 -- SW2 [<span style="color:#24909d">dir</span>=both, arrowhead=box];
     SW4 -- SW3 [<span style="color:#24909d">dir</span>=both, arrowhead=normal];
    
     PC1 [label = <span style="color:#ed9d13">&#34;PC1 [.101]&#34;</span>];
     PC4 [label = <span style="color:#ed9d13">&#34;PC5 [.105]&#34;</span>];
        
     SW1 -- PC1 [<span style="color:#24909d">dir</span>=both];
     SW3 -- PC4 [<span style="color:#24909d">dir</span>=both];

     {rank = same; SW1; SW2; SW3;}
     {rank = same; PC1; PC4;}
 }
</code></pre></div><p><img src="output_15_0.svg" alt="svg"></p>
<p>That means:</p>
<ul>
<li><code>SW1</code>s <strong>Fa0/1</strong> port is in <strong>blocking</strong> state (arrow endpoint is a box)</li>
<li><code>SW2</code>s <strong>Fa0/5</strong> port is in <strong>blocking</strong> state (arrow endpoint is a box)</li>
<li>all other ports are in <strong>forwarding</strong> state</li>
</ul>
<p>In this case there is <strong>only</strong> one way <code>PC1</code> could send frames to <code>PC5</code>  (red lines):</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">%%dot
<span style="color:#999;font-style:italic"># &lt;!-- collapse=True --&gt;</span>
 graph mylab {<span style="color:#a61717;background-color:#e3d2d2">↔</span>

     SW1 -- SW2 [<span style="color:#24909d">dir</span>=both, arrowtail=box];
     SW2 -- SW3 [<span style="color:#24909d">dir</span>=both, arrowhead=normal];

     SW4 -- SW1 [<span style="color:#24909d">dir</span>=both, color=<span style="color:#ed9d13">&#34;red&#34;</span>];
     SW4 -- SW2 [<span style="color:#24909d">dir</span>=both, arrowhead=box];
     SW4 -- SW3 [<span style="color:#24909d">dir</span>=both, arrowhead=normal, color=<span style="color:#ed9d13">&#34;red&#34;</span>];
    
     PC1 [label = <span style="color:#ed9d13">&#34;PC1 [.101]&#34;</span>];
     PC4 [label = <span style="color:#ed9d13">&#34;PC5 [.105]&#34;</span>];
        
     SW1 -- PC1 [<span style="color:#24909d">dir</span>=both, color=<span style="color:#ed9d13">&#34;red&#34;</span>];
     SW3 -- PC4 [<span style="color:#24909d">dir</span>=both, color=<span style="color:#ed9d13">&#34;red&#34;</span>];

     {rank = same; SW1; SW2; SW3;}
     {rank = same; PC1; PC4;}
 }
</code></pre></div><p><img src="output_17_0.svg" alt="svg"></p>
<p>In the next posts I&rsquo;ll deal with <strong>IP routing</strong> on <strong>Layer 3</strong>.</p>
</div>
  <div id="comments">
      
<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "dorneanu" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

  </div>
</main>
 






<div class="tl fixed list-pages lh-copy" id="contents-list"></div>



<div class="pagination tc tr-l db fixed-l bottom-2-l right-2-l mb3 mb0-l">
  
<a id="scroll-to-top" class="f6 o-0 link br2 ph2 pv1 mb1 bg-main-color pointer" onclick="topFunction()" style="color: #fff; visibility: hidden; display: none; transition: opacity .5s, visibility .5s;" title="back to top">back to top</a>
<br>
  <p class="mb0 mt2">
  <a href="https://blog.dornea.nu/2015/10/21/basic-layer-2-switching-using-cisco-packet-tracer/">prev</a>
  <a href="https://blog.dornea.nu/2015/11/17/openvpn-for-paranoids/">next</a>
  </p>
</div>

  <footer class="content-width mt0 mt5-l mb4 f6 center ph3 gray tc tl-l">
  <hr class="dn db-l ml0-l gray w3"><br>
  Powered by <a href="https://gohugo.io/" target="_blank" class="link gray dim">Hugo</a>, based on the <a href="https://github.com/lingxz/er" target="_blank" class="link gray dim">Er</a> theme.
  2021 Victor Dorneanu - All rights reserved
  <a href="https://blog.dornea.nu/feed.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a>
</footer>

  



<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
<style>.is-active-link::before { background-color: var(--secondary-color); }</style>




<script type="text/javascript">
var prevScrollpos = window.pageYOffset;
window.onscroll = function() {
  var currentScrollPos = window.pageYOffset;

  
  if (document.getElementById("tag-cloud") !== null) { 
    if (prevScrollpos > currentScrollPos) { 
      document.getElementById("tag-cloud").style.visibility = "visible";
      document.getElementById("tag-cloud").style.opacity = "1";
    } else {
      document.getElementById("tag-cloud").style.visibility = "hidden";
      document.getElementById("tag-cloud").style.opacity = "0";
    }
  }
  

  
  if (document.body.scrollTop > 1000 || document.documentElement.scrollTop > 1000) {
      document.getElementById("scroll-to-top").style.display = "inline";
      document.getElementById("scroll-to-top").style.visibility = "visible";
      document.getElementById("scroll-to-top").style.opacity = "1";
  } else {
      document.getElementById("scroll-to-top").style.visibility = "hidden";
      document.getElementById("scroll-to-top").style.opacity = "0";
  }
  
  prevScrollpos = currentScrollPos;
}


function topFunction() {
  document.body.scrollTop = 0; 
  document.documentElement.scrollTop = 0; 
}






if (document.getElementById("contents-list") !== null && document.getElementsByClassName("post-content").length !== 0) { 
  tocbot.init({
    
    tocSelector: '#contents-list',
    
    contentSelector: '.post-content',
    
    headingSelector: 'h1, h2, h3',
  });
}


</script>





<script>
 var glightbox = GLightbox({
     selector: '.glightbox'
 });
</script>

  
</body>
</html>
