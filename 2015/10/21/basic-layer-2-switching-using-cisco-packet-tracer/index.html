<!doctype html>
<html lang="en">
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta content='text/html; charset=utf-8' http-equiv='content-type' />

  <title>Basic Layer 2 Switching using Cisco Packet Tracer - blog.dornea.nu</title>
  <meta content='Basic Layer 2 Switching using Cisco Packet Tracer - blog.dornea.nu' property='title' />
  <meta content='Basic Layer 2 Switching using Cisco Packet Tracer - blog.dornea.nu' property='og:title' />


<meta property="og:description" content="As a pseudo-preparation for my CCNA exam I wanted to sum up some of the basic configuration steps related to Cisco switches. Although I won&rsquo;t handle every topic related to Layer 2, I will assume you have already some network knowledge. The main reason for this post is to show how to setup a really small network infrastructure and configure its components. For my purposes I have used Cisco&rsquo;s Packet Tracer to simulate the network which I highly recommend." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.dornea.nu/2015/10/21/basic-layer-2-switching-using-cisco-packet-tracer/" />


<meta property="article:published_time" content="2015-10-21T00:00:00&#43;00:00"/>

<meta property="article:modified_time" content="2015-10-21T00:00:00&#43;00:00"/>








<meta name="generator" content="Hugo 0.120.3">

<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" rel="stylesheet">
<link href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" rel="stylesheet"/>
<style type="text/css">/*https://coolors.co/afd5aa-f0f2ef-a69f98-3d3d3d-8c6057*/
:root {
  --main-color: #8C6056; 
  --secondary-color: #AFD5AA;
  --logo-text-color: #fff;
  --body-text-color: #3d3d3d;
  --heading-text-color: #383838;
  --background-color: #fff;
}</style>
<link href='https://blog.dornea.nu/css/tachyons.min.css' rel="stylesheet">
<link href='https://blog.dornea.nu/css/styles.css' rel="stylesheet">
<link rel="stylesheet" href="https://blog.dornea.nu/css/custom.css">
<link rel="stylesheet" href="https://blog.dornea.nu/css/syntax.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" />
<script src="https://cdn.jsdelivr.net/gh/mcstudios/glightbox/dist/js/glightbox.min.js"></script>


<link rel="icon" 
 
  href='https://blog.dornea.nu/favicon.ico'

type="image/x-icon"/>

<link href='https://blog.dornea.nu/feed.xml' rel="alternate" type="application/atom+xml" title="blog.dornea.nu" />



<script src="https://beamanalytics.b-cdn.net/beam.min.js" data-token="b8a4b728-8eda-42fb-8376-10168c622160" async></script>
</head>
<body class="global-font">
  <nav class=" flex-ns justify-between border-box pa3 pl3-l pr2-l mt1 mt0-ns" id="navbar">
  <div class="flex">
    <a class="f4 fw6 ttu no-underline dim bg-main-color pv1 ph2 br2" id="site-title" href='https://blog.dornea.nu/' title="Home">blog.dornea.nu</a>
  </div>
  
  <div class=" flex-ns mt2 mt0-ns pv1">
    
      <a class="link dim dark-gray f6 dib mr2 mr3-l ttu tracked" href='https://blog.dornea.nu/' title="Home">Home</a>
    
      <a class="link dim dark-gray f6 dib mr2 mr3-l ttu tracked" href='http://dornea.nu' title="About">About</a>
    
      <a class="link dim dark-gray f6 dib mr2 mr3-l ttu tracked" href='https://blog.dornea.nu/feed.xml' title="RSS">RSS</a>
    
      <a class="link dim dark-gray f6 dib mr2 mr3-l ttu tracked" href='https://blog.dornea.nu/tags' title="Tags">Tags</a>
    
      <a class="link dim dark-gray f6 dib mr2 mr3-l ttu tracked" href='https://brainfck.org' title="Zettelkasten">Zettelkasten</a>
    
  </div>
  
</nav>
  
<main class="center mv4 content-width ph3">
  <div class="f3 fw6 heading-color heading-font post-title">Basic Layer 2 Switching using Cisco Packet Tracer</div>
  <p class="silver f6 mt1 mb4 post-meta">
    <time>21 Oct 2015</time> 
     | 
    

    
     ~
  

13 mins
|

    
    tags: [ <a href='https://blog.dornea.nu/tags/networking' class="link silver">networking</a> <a href='https://blog.dornea.nu/tags/cisco' class="link silver">cisco</a> <a href='https://blog.dornea.nu/tags/ccna' class="link silver">ccna</a> <a href='https://blog.dornea.nu/tags/layer-2' class="link silver">layer 2</a> <a href='https://blog.dornea.nu/tags/switch' class="link silver">switch</a> <a href='https://blog.dornea.nu/tags/vlan' class="link silver">vlan</a> <a href='https://blog.dornea.nu/tags/ipython' class="link silver">ipython</a> <a href='https://blog.dornea.nu/tags/admin' class="link silver">admin</a>  ]
    

  </p>
  <div class="lh-copy post-content">
    

      <p>As a pseudo-preparation for my <a href="http://www.cisco.com/web/learning/certifications/associate/ccna/index.html">CCNA</a> exam I wanted to sum up some of the <em>basic</em> configuration steps related to <strong>Cisco</strong> switches. Although I won&rsquo;t handle <em>every</em> topic related to Layer 2, I will assume you have already some network knowledge. The main reason for this post is to show how to setup a <em>really</em> small network infrastructure and <em>configure</em> its components. For my purposes I have used <a href="http://www.packettracernetwork.com">Cisco&rsquo;s Packet Tracer</a> to simulate the network which I highly recommend. I know there is sth like <a href="http://www.gns3.com">GNS3</a> but I didn&rsquo;t have (yet) the time to look at it.</p>
<h2 id="configure-the-switches">Configure the Switches</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">%%</span><span class="n">blockdiag</span>
</span></span><span class="line"><span class="cl"><span class="c1"># &lt;!-- collapse=True --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">diagram</span> <span class="n">admin</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">SW1</span> <span class="p">[</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&#34;cisco.layer_2_remote_switch&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="n">SW2</span> <span class="p">[</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&#34;cisco.layer_2_remote_switch&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="n">SW3</span> <span class="p">[</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&#34;cisco.layer_2_remote_switch&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">SW1</span> <span class="o">&lt;-&gt;</span> <span class="n">SW2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">SW2</span> <span class="o">&lt;-&gt;</span> <span class="n">SW3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="https://blog.dornea.nu/posts/img/2015/basic-layer-2-switching-using-cisco-packet-tracer/output_2_0.png" alt="png"></p>
<p>We&rsquo;ll have 3 switches connected to each other: <strong>SW1</strong>, <strong>SW2</strong> and <strong>SW3</strong>. Each of these switches (<a href="http://www.cisco.com/c/en/us/products/collateral/switches/catalyst-2960-series-switches/prod_bulletin0900aecd80322c22.html">Cisco Catalyst 2960 series</a>) will have one or several <strong>VLANs</strong> assigned. But first let&rsquo;s do some <em>house keeping</em> and configure each switch properly. For every switch I&rsquo;ll do:</p>
<ol>
<li>Restrict access
<ul>
<li>Add local user</li>
<li>Set passwords for user</li>
<li>Restrict console access</li>
</ul>
</li>
<li>Enable SSH v2
<ul>
<li>Allow VTYs to use <strong>only</strong> SSH</li>
</ul>
</li>
<li>Disable autologout functionality</li>
<li>Setup proper console logging</li>
<li>&hellip;</li>
</ol>
<h3 id="basic-switch-configuration">Basic switch configuration</h3>
<ul>
<li>House keeping:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">Switch&gt;enable
</span></span><span class="line"><span class="cl">Switch#conf t
</span></span><span class="line"><span class="cl">Enter configuration commands, one per line.  End with CNTL/Z.
</span></span><span class="line"><span class="cl">Switch<span class="o">(</span>config<span class="o">)</span><span class="c1">#hostname SW1</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config<span class="o">)</span><span class="c1">#no ip domain-lookup</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config<span class="o">)</span><span class="c1">#service password-encryption </span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config<span class="o">)</span><span class="c1">#enable secret admin!</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config<span class="o">)</span><span class="c1">#exit</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Console settings:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW1<span class="o">(</span>config<span class="o">)</span><span class="c1">#line console 0</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-line<span class="o">)</span><span class="c1">#exec-timeout 0 0</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-line<span class="o">)</span><span class="c1">#logging synchronous </span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config<span class="o">)</span><span class="c1">#exit</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Virtual terminal settings:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW1<span class="o">(</span>config<span class="o">)</span><span class="c1">#line vty 0 15</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-line<span class="o">)</span><span class="c1">#exec-timeout 0 0</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config<span class="o">)</span><span class="c1">#exit</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>SSH settings:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW1<span class="o">(</span>config<span class="o">)</span><span class="c1">#ip domain-name sw1.local</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config<span class="o">)</span><span class="c1">#crypto key generate rsa</span>
</span></span><span class="line"><span class="cl">The name <span class="k">for</span> the keys will be: SW1.sw1.local
</span></span><span class="line"><span class="cl">Choose the size of the key modulus in the range of <span class="m">360</span> to <span class="m">2048</span> <span class="k">for</span> your
</span></span><span class="line"><span class="cl">  General Purpose Keys. Choosing a key modulus greater than <span class="m">512</span> may take
</span></span><span class="line"><span class="cl">  a few minutes.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">How many bits in the modulus <span class="o">[</span>512<span class="o">]</span>: <span class="m">2048</span>
</span></span><span class="line"><span class="cl">% Generating <span class="m">2048</span> bit RSA keys, keys will be non-exportable...<span class="o">[</span>OK<span class="o">]</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config<span class="o">)</span><span class="c1">#ip ssh version 2</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Allow SSH for terminals:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW1<span class="o">(</span>config<span class="o">)</span><span class="c1">#line vty 0 15</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-line<span class="o">)</span><span class="c1">#login local</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-line<span class="o">)</span><span class="c1">#transport input ssh</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-line<span class="o">)</span><span class="c1">#exit</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Add local users:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW1<span class="o">(</span>config<span class="o">)</span><span class="c1">#username admin password admin!</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Check SSH:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW1#show ssh
</span></span><span class="line"><span class="cl">%No SSHv2 server connections running.
</span></span><span class="line"><span class="cl">%No SSHv1 server connections running.
</span></span></code></pre></td></tr></table>
</div>
</div><p>And now store the configuration by replacing the <strong>startup-config</strong> by the <strong>running-config</strong>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW1#copy running-config startup-config 
</span></span><span class="line"><span class="cl">Destination filename <span class="o">[</span>startup-config<span class="o">]</span>? 
</span></span><span class="line"><span class="cl">Building configuration...
</span></span></code></pre></td></tr></table>
</div>
</div><p>Now we will apply the same configuration (with slightly different modifications) to <code>SW2</code> and <code>SW3</code>.</p>
<h3 id="configure-ports">Configure ports</h3>
<p>Let&rsquo;s have a look at the next step and how our small network should look like:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">%%</span><span class="n">blockdiag</span>
</span></span><span class="line"><span class="cl"><span class="c1"># &lt;!-- collapse=True --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">diagram</span> <span class="n">admin</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">SW1</span> <span class="p">[</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&#34;cisco.layer_2_remote_switch&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="n">SW2</span> <span class="p">[</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&#34;cisco.layer_2_remote_switch&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="n">SW3</span> <span class="p">[</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&#34;cisco.layer_2_remote_switch&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">PC1</span> <span class="p">[</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&#34;cisco.pc&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="n">PC2</span> <span class="p">[</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&#34;cisco.pc&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="n">PC3</span> <span class="p">[</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&#34;cisco.pc&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="n">PC4</span> <span class="p">[</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&#34;cisco.pc&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="n">PC5</span> <span class="p">[</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&#34;cisco.pc&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="n">PC6</span> <span class="p">[</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&#34;cisco.pc&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">SW1</span> <span class="o">&lt;-&gt;</span> <span class="n">SW2</span> <span class="p">[</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&#34;F0/1   -   F0/1&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="n">SW2</span> <span class="o">&lt;-&gt;</span> <span class="n">SW3</span> <span class="p">[</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&#34;F0/2   -   F0/1&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">group</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">orientation</span> <span class="o">=</span> <span class="n">portrait</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span> <span class="o">=</span> <span class="s2">&#34;#FFF&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">SW1</span> <span class="o">&lt;-&gt;</span> <span class="n">PC1</span> <span class="p">[</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&#34;F0/2 - F0&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="n">SW1</span> <span class="o">&lt;-&gt;</span> <span class="n">PC2</span> <span class="p">[</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&#34;F0/3 - F0&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">group</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">orientation</span> <span class="o">=</span> <span class="n">portrait</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span> <span class="o">=</span> <span class="s2">&#34;#FFF&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">SW2</span> <span class="o">&lt;-&gt;</span> <span class="n">PC3</span> <span class="p">[</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&#34;F0/3 - F0&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="n">SW2</span> <span class="o">&lt;-&gt;</span> <span class="n">PC4</span> <span class="p">[</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&#34;F0/4 - F0&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">group</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">orientation</span> <span class="o">=</span> <span class="n">portrait</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span> <span class="o">=</span> <span class="s2">&#34;#FFF&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">SW3</span> <span class="o">&lt;-&gt;</span> <span class="n">PC5</span> <span class="p">[</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&#34;F0/3 - F0&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="n">SW3</span> <span class="o">&lt;-&gt;</span> <span class="n">PC6</span> <span class="p">[</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&#34;F0/4 - F0&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="https://blog.dornea.nu/posts/img/2015/basic-layer-2-switching-using-cisco-packet-tracer/output_5_0.png" alt="png"></p>
<p>Following table shows the links between the switches and the PCs and which <strong>switch ports</strong> are being used:</p>
<table cellpadding="0" cellspacing="0" width="100%" border="0">
  <tr>
    <th>PC</th>
    <th>SW1</th>
    <th>SW2</th>
    <th>SW3</th>
  </tr>
  <tr>
    <td>PC1</td>
    <td>F0/2</td>
    <td></td>
    <td></td>
  </tr>
    <tr>
    <td>PC2</td>
    <td>F0/3</td>
    <td></td>
    <td></td>  
  </tr>
    <tr>
    <td>PC3</td>
    <td></td>
    <td>F0/3</td>
    <td></td>
  </tr>
   <tr>
    <td>PC4</td>
    <td></td>
    <td>F0/4</td>
    <td></td>
  </tr>
  <tr>
    <td>PC5</td>
    <td></td>
    <td></td>
    <td>F0/3</td>
  </tr>
  <tr>
    <td>PC6</td>
    <td></td>
    <td></td>
    <td>F0/4</td>
  </tr>
</table>
<h3 id="configure-links-between-switches">Configure links between switches</h3>
<p>Now I&rsquo;ll configure the ports on between <code>SW1</code> and <code>SW2</code>:</p>
<ul>
<li>Set duplex and link speed:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW1#conf t
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config<span class="o">)</span><span class="c1">#int f0/1</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#dupl</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#duplex full</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#speed 100</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#description SW2 connects here</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Activate <strong>trunk</strong> mode:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW1<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#switchport mode trunk</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#switchport trunk encapsulation dot1q</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#no shhutdown</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#end</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Check switchport configuration:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW1#sh int f0/1 switchport
</span></span><span class="line"><span class="cl">Name: Fa0/1
</span></span><span class="line"><span class="cl">Switchport: Enabled
</span></span><span class="line"><span class="cl">Administrative Mode: trunk
</span></span><span class="line"><span class="cl">Operational Mode: down
</span></span><span class="line"><span class="cl">Administrative Trunking Encapsulation: dot1q
</span></span><span class="line"><span class="cl">Operational Trunking Encapsulation: dot1q
</span></span><span class="line"><span class="cl">Negotiation of Trunking: On
</span></span><span class="line"><span class="cl">Access Mode VLAN: <span class="m">1</span> <span class="o">(</span>default<span class="o">)</span>
</span></span><span class="line"><span class="cl">Trunking Native Mode VLAN: <span class="m">1</span> <span class="o">(</span>default<span class="o">)</span>
</span></span><span class="line"><span class="cl">Voice VLAN: none
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Check interface configuration:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW1#sh int f0/1 
</span></span><span class="line"><span class="cl">FastEthernet0/1 is down, line protocol is down <span class="o">(</span>disabled<span class="o">)</span>
</span></span><span class="line"><span class="cl">  Hardware is Lance, address is 0090.211e.2e01 <span class="o">(</span>bia 0090.211e.2e01<span class="o">)</span>
</span></span><span class="line"><span class="cl">  Description: Sw2 connects here
</span></span><span class="line"><span class="cl"> BW <span class="m">100000</span> Kbit, DLY <span class="m">1000</span> usec,
</span></span><span class="line"><span class="cl">     reliability 255/255, txload 1/255, rxload 1/255
</span></span><span class="line"><span class="cl">  Encapsulation ARPA, loopback not <span class="nb">set</span>
</span></span><span class="line"><span class="cl">  Keepalive <span class="nb">set</span> <span class="o">(</span><span class="m">10</span> sec<span class="o">)</span>
</span></span><span class="line"><span class="cl">  Full-duplex, 100Mb/s
</span></span><span class="line"><span class="cl">  input flow-control is off, output flow-control is off
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></td></tr></table>
</div>
</div><p>You should have noticed that the interfaces is currently <strong>down</strong>. This happens due to <strong>encapsulation</strong> misconfiguration between the two switches. After having <code>SW2</code> configured as well you should have:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW2#sh int f0/1 switchport 
</span></span><span class="line"><span class="cl">Name: Fa0/1
</span></span><span class="line"><span class="cl">Switchport: Enabled
</span></span><span class="line"><span class="cl">Administrative Mode: trunk
</span></span><span class="line"><span class="cl">Operational Mode: trunk
</span></span><span class="line"><span class="cl">Administrative Trunking Encapsulation: dot1q
</span></span><span class="line"><span class="cl">Operational Trunking Encapsulation: dot1q
</span></span><span class="line"><span class="cl">Negotiation of Trunking: On
</span></span><span class="line"><span class="cl">Access Mode VLAN: <span class="m">1</span> <span class="o">(</span>default<span class="o">)</span>
</span></span><span class="line"><span class="cl">Trunking Native Mode VLAN: <span class="m">1</span> <span class="o">(</span>default<span class="o">)</span>
</span></span><span class="line"><span class="cl">Voice VLAN: none
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">SW2#sh int f0/1
</span></span><span class="line"><span class="cl">FastEthernet0/1 is up, line protocol is up <span class="o">(</span>connected<span class="o">)</span>
</span></span><span class="line"><span class="cl">  Hardware is Lance, address is 00d0.58ac.4d01 <span class="o">(</span>bia 00d0.58ac.4d01<span class="o">)</span>
</span></span><span class="line"><span class="cl">  Description: SW1 connects here
</span></span><span class="line"><span class="cl"> BW <span class="m">100000</span> Kbit, DLY <span class="m">1000</span> usec,
</span></span><span class="line"><span class="cl">     reliability 255/255, txload 1/255, rxload 1/255
</span></span><span class="line"><span class="cl">  Encapsulation ARPA, loopback not <span class="nb">set</span>
</span></span><span class="line"><span class="cl">  Keepalive <span class="nb">set</span> <span class="o">(</span><span class="m">10</span> sec<span class="o">)</span>
</span></span><span class="line"><span class="cl">  Full-duplex, 100Mb/s
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></td></tr></table>
</div>
</div><p>Now we should have a working <strong>trunk</strong> between <code>SW1</code> and <code>SW2</code>. The link between <code>Sw2</code> and <code>Sw3</code> should be then configured as well.</p>
<h3 id="add-vlans">Add VLANs</h3>
<p>Now I&rsquo;ll create 2 VLANs:</p>
<ul>
<li>VLAN <strong>Students</strong>
<ul>
<li>ID: 10</li>
<li>Network address: <code>10.10.10.0/24</code></li>
<li>Hosts: <code>PC1</code>, <code>PC2</code>, <code>PC5</code></li>
</ul>
</li>
<li>VLAN <strong>Teachers</strong>
<ul>
<li>ID: 20</li>
<li>Network address: <code>20.20.20.0/24</code></li>
<li>Hosts: <code>PC3</code>, <code>PC4</code>, <code>PC6</code></li>
</ul>
</li>
</ul>
<p>Additionally every host PC gets following IP addresss:</p>
<table cellpadding="0" cellspacing="0" width="100%" border="0">
  <tr>
    <th>Host</th>
    <th>IP</th>
    <th>VLAN</th>
  </tr>
  <tr>
    <td>PC1</td>
    <td>10.10.10.101</td>
    <td>Students</td>
  </tr>
  <tr>
    <td>PC2</td>
    <td>10.10.10.102</td>
    <td>Students</td>
  </tr>
  <tr>
    <td>PC3</td>
    <td>20.20.20.103</td>
    <td>Teachers</td>
  </tr>
  <tr>
    <td>PC4</td>
    <td>20.20.20.104</td>
    <td>Teachers</td>
  </tr>
  <tr>
    <td>PC5</td>
    <td>10.10.10.105</td>
    <td>Students</td>
  </tr>
  <tr>
    <td>PC6</td>
    <td>20.20.20.106</td>
    <td>Teachers</td>
  </tr>
</table>
<p>Now let&rsquo;s have a look at our topology:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">%%</span><span class="n">blockdiag</span>
</span></span><span class="line"><span class="cl"><span class="c1"># &lt;!-- collapse=True --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">diagram</span> <span class="n">admin</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">SW1</span> <span class="p">[</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&#34;cisco.layer_2_remote_switch&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="n">SW2</span> <span class="p">[</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&#34;cisco.layer_2_remote_switch&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="n">SW3</span> <span class="p">[</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&#34;cisco.layer_2_remote_switch&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">PC1</span> <span class="p">[</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&#34;cisco.pc&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="n">PC2</span> <span class="p">[</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&#34;cisco.pc&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="n">PC3</span> <span class="p">[</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&#34;cisco.pc&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="n">PC4</span> <span class="p">[</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&#34;cisco.pc&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="n">PC5</span> <span class="p">[</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&#34;cisco.pc&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="n">PC6</span> <span class="p">[</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&#34;cisco.pc&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">SW1</span> <span class="o">&lt;-&gt;</span> <span class="n">SW2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">SW2</span> <span class="o">&lt;-&gt;</span> <span class="n">SW3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">group</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">orientation</span> <span class="o">=</span> <span class="n">portrait</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">label</span> <span class="o">=</span> <span class="s2">&#34;VLAN 10&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span> <span class="o">=</span> <span class="s2">&#34;#FFF000&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">SW1</span> <span class="o">&lt;-&gt;</span> <span class="n">PC1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">SW1</span> <span class="o">&lt;-&gt;</span> <span class="n">PC2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">group</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">orientation</span> <span class="o">=</span> <span class="n">portrait</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">label</span> <span class="o">=</span> <span class="s2">&#34;VLAN 20&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span> <span class="o">=</span> <span class="s2">&#34;#FFFEEE&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">SW2</span> <span class="o">&lt;-&gt;</span> <span class="n">PC3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">SW2</span> <span class="o">&lt;-&gt;</span> <span class="n">PC4</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">group</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">orientation</span> <span class="o">=</span> <span class="n">portrait</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">label</span> <span class="o">=</span> <span class="s2">&#34;VLAN 10 + VLAN 20&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span> <span class="o">=</span> <span class="s2">&#34;#FFFDDD&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">SW3</span> <span class="o">&lt;-&gt;</span> <span class="n">PC5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">SW3</span> <span class="o">&lt;-&gt;</span> <span class="n">PC6</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="https://blog.dornea.nu/posts/img/2015/basic-layer-2-switching-using-cisco-packet-tracer/output_7_0.png" alt="png"></p>
<p><strong>Keep in mind that the switches don&rsquo;t really belong to any VLANs at all.</strong></p>
<h3 id="add-vlan-students">Add VLAN Students</h3>
<p>Adding the VLAN configuration has to be done on every switch. I could have used <code>VTP</code> (VLAN Trunking Protocol) but for the sake of exercise I&rsquo;ll do it manually, beginning with <code>SW1</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW1<span class="o">(</span>config<span class="o">)</span><span class="c1">#vlan 10</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-vlan<span class="o">)</span><span class="c1">#name Students</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-vlan<span class="o">)</span><span class="c1">#exit</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config<span class="o">)</span><span class="c1">#int range f0/2 - 3</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-if-range<span class="o">)</span><span class="c1">#switchport mode access </span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-if-range<span class="o">)</span><span class="c1">#switchport access vlan 10</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-if-range<span class="o">)</span><span class="c1">#no shutdown</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Now do the same with <code>SW3</code> (ports are of course different):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW3<span class="o">(</span>config<span class="o">)</span><span class="c1">#int f0/3</span>
</span></span><span class="line"><span class="cl">SW3<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#switchport mode access </span>
</span></span><span class="line"><span class="cl">SW3<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#switchport access vlan 10</span>
</span></span><span class="line"><span class="cl">SW3<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#no shutdown </span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Add the VLAN config to <code>SW2</code> as well:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW2<span class="o">(</span>config<span class="o">)</span><span class="c1">#vlan 10</span>
</span></span><span class="line"><span class="cl">SW2<span class="o">(</span>config-vlan<span class="o">)</span><span class="c1">#name Students</span>
</span></span><span class="line"><span class="cl">SW2<span class="o">(</span>config-vlan<span class="o">)</span><span class="c1">#exit</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="add-vlan-teachers">Add VLAN Teachers</h3>
<p>The configuration is pretty straight-forward:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW2<span class="o">(</span>config<span class="o">)</span><span class="c1">#vlan 20</span>
</span></span><span class="line"><span class="cl">SW2<span class="o">(</span>config-vlan<span class="o">)</span><span class="c1">#name Teachers</span>
</span></span><span class="line"><span class="cl">SW2<span class="o">(</span>config-vlan<span class="o">)</span><span class="c1">#exit</span>
</span></span><span class="line"><span class="cl">SW2<span class="o">(</span>config<span class="o">)</span><span class="c1">#int range f0/3 - 4</span>
</span></span><span class="line"><span class="cl">SW2<span class="o">(</span>config-if-range<span class="o">)</span><span class="c1">#switchport mode access </span>
</span></span><span class="line"><span class="cl">SW2<span class="o">(</span>config-if-range<span class="o">)</span><span class="c1">#switchport access vlan 10</span>
</span></span><span class="line"><span class="cl">SW2<span class="o">(</span>config-if-range<span class="o">)</span><span class="c1">#no shutdown </span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Now on <code>SW3</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW3<span class="o">(</span>config-vlan<span class="o">)</span><span class="c1">#name Teachers</span>
</span></span><span class="line"><span class="cl">SW3<span class="o">(</span>config-vlan<span class="o">)</span><span class="c1">#exit</span>
</span></span><span class="line"><span class="cl">SW3<span class="o">(</span>config<span class="o">)</span><span class="c1">#int f0/2</span>
</span></span><span class="line"><span class="cl">SW3<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#switchport mode access </span>
</span></span><span class="line"><span class="cl">SW3<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#switchport access vlan 20</span>
</span></span><span class="line"><span class="cl">SW3<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#no shutdown </span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Don&rsquo;t forget to add the VLAN config to <code>SW1</code> as well:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW1<span class="o">(</span>config<span class="o">)</span><span class="c1">#vlan 20</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-vlan<span class="o">)</span><span class="c1">#name Teachers</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-vlan<span class="o">)</span><span class="c1">#exit</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="restrict-vlans-on-trunk-ports">Restrict VLANs on trunk ports</h3>
<p>If you have a look at the configured trunk ports, you&rsquo;ll get sth like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW1#sh int trunk
</span></span><span class="line"><span class="cl">Port        Mode         Encapsulation  Status        Native vlan
</span></span><span class="line"><span class="cl">Fa0/1       on           802.1q         trunking      <span class="m">1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Port        Vlans allowed on trunk
</span></span><span class="line"><span class="cl">Fa0/1       1-1005
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Port        Vlans allowed and active in management domain
</span></span><span class="line"><span class="cl">Fa0/1       1,10,20
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Port        Vlans in spanning tree forwarding state and not pruned
</span></span><span class="line"><span class="cl">Fa0/1       1,10,20
</span></span></code></pre></td></tr></table>
</div>
</div><p>You&rsquo;ll notice that the <strong>allowed VLANs</strong> on the trunk ports range from <code>1-1005</code>. Actually (and due to security reasons) we want to restrict the VLANs which should be forwarded by the switches:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW1<span class="o">(</span>config<span class="o">)</span><span class="c1">#int f0/1</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#switchport trunk allowed vlan 10,20</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>We only want to allow frames with a VLAN tag id = {10, 20}. <strong>Every</strong> trunk port must be configured that way. Finally you can verify that by:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW2#sh int trunk
</span></span><span class="line"><span class="cl">Port        Mode         Encapsulation  Status        Native vlan
</span></span><span class="line"><span class="cl">Fa0/1       on           802.1q         trunking      <span class="m">1</span>
</span></span><span class="line"><span class="cl">Fa0/2       on           802.1q         trunking      <span class="m">1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Port        Vlans allowed on trunk
</span></span><span class="line"><span class="cl">Fa0/1       10,20
</span></span><span class="line"><span class="cl">Fa0/2       10,20
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Port        Vlans allowed and active in management domain
</span></span><span class="line"><span class="cl">Fa0/1       10,20
</span></span><span class="line"><span class="cl">Fa0/2       10,20
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Port        Vlans in spanning tree forwarding state and not pruned
</span></span><span class="line"><span class="cl">Fa0/1       10,20
</span></span><span class="line"><span class="cl">Fa0/2       10,20
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="configure-switch-virtual-interfaces">Configure Switch Virtual Interfaces</h3>
<p>Traditionally switches operate on <em>Layer 2</em>. By using <strong>SVI</strong>s (Switch Virtual Interface) the switches uses a virtual <em>Layer 3</em> interface to route traffic to other <em>Layer 3</em> interface without any physical router. VLANs divide networks into smaller segments which keep traffic inside the VLAN. And because each VLAN has its own domain, a mechanism is needed to pass data to other VLANs.</p>
<p>In our case we&rsquo;ll have to add each switch to some VLAN and assign some SVI a valid routable IP address.</p>
<table cellpadding="0" cellspacing="0" width="100%" border="0">
  <tr>
    <th>Switch </th>
    <th>IP address</th>
    <th>VLAN</th>
  </tr>
  <tr>
    <td>SW1</td>
    <td>30.30.30.1</td>
    <td>Management</td>
  </tr>
  <tr>
    <td>SW2</td>
    <td>30.30.30.2</td>
    <td>Management</td>
  </tr>
  <tr>
    <td>SW3</td>
    <td>30.30.30.3</td>
    <td>Management</td>
  </tr>
</table>
<ul>
<li>Configure <code>SW1</code>:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW1<span class="o">(</span>config<span class="o">)</span><span class="c1">#vlan 30</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-vlan<span class="o">)</span><span class="c1">#name Management</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-vlan<span class="o">)</span><span class="c1">#exit</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config<span class="o">)</span><span class="c1">#int vlan 30</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl">%LINK-5-CHANGED: Interface Vlan30, changed state to up
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#ip address 30.30.30.1 255.255.255.0</span>
</span></span><span class="line"><span class="cl">SW1#sh ip int brief
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">Vlan30                 30.30.30.1      YES manual up                    down
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Configure <code>SW2</code>:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW2<span class="o">(</span>config<span class="o">)</span><span class="c1">#vlan 30</span>
</span></span><span class="line"><span class="cl">SW2<span class="o">(</span>config-vlan<span class="o">)</span><span class="c1">#name Management</span>
</span></span><span class="line"><span class="cl">SW2<span class="o">(</span>config-vlan<span class="o">)</span><span class="c1">#exit</span>
</span></span><span class="line"><span class="cl">SW2<span class="o">(</span>config<span class="o">)</span><span class="c1">#int vlan 30</span>
</span></span><span class="line"><span class="cl">SW2<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl">%LINK-5-CHANGED: Interface Vlan30, changed state to up
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">SW2<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#ip add</span>
</span></span><span class="line"><span class="cl">SW2<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#ip address 30.30.30.2 255.255.255.0</span>
</span></span><span class="line"><span class="cl">SW2#sh ip int brief
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">Vlan30                 30.30.30.2      YES manual up                    down
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Configure <code>Sw3</code>:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW3<span class="o">(</span>config<span class="o">)</span><span class="c1">#vlan 30</span>
</span></span><span class="line"><span class="cl">SW3<span class="o">(</span>config-vlan<span class="o">)</span><span class="c1">#name Management</span>
</span></span><span class="line"><span class="cl">SW3<span class="o">(</span>config-vlan<span class="o">)</span><span class="c1">#exit</span>
</span></span><span class="line"><span class="cl">SW3<span class="o">(</span>config<span class="o">)</span><span class="c1">#int vlan 30</span>
</span></span><span class="line"><span class="cl">SW3<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl">%LINK-5-CHANGED: Interface Vlan30, changed state to up
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">SW3<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#ip address 30.30.30.3 255.255.255.0</span>
</span></span><span class="line"><span class="cl">SW3#sh ip int brief
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">Vlan30                 30.30.30.3      YES manual up                    down
</span></span></code></pre></td></tr></table>
</div>
</div><p>As you can see the interfaces are all in <strong>up/down</strong> state which is generally a <strong>Layer 2</strong> problem. If you remember correctly we have configured the <em>trunk</em> ports previously. We also allowed only <em>specific</em> VLANs to pass through these trunks. In this case we&rsquo;ll have to allow VLAN <strong>Management</strong> as well. Just an example for <code>SW2</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW2<span class="o">(</span>config<span class="o">)</span><span class="c1">#int range f0/1 - 2</span>
</span></span><span class="line"><span class="cl">SW2<span class="o">(</span>config-if-range<span class="o">)</span><span class="c1">#switchport trunk allowed vlan 10,20,30</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Now the port should be resetted:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">SW2<span class="o">(</span>config<span class="o">)</span><span class="c1">#int vlan 30</span>
</span></span><span class="line"><span class="cl">SW2<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#no shutdown </span>
</span></span><span class="line"><span class="cl">SW2<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl">%LINEPROTO-5-UPDOWN: Line protocol on Interface Vlan30, changed state to up
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">SW2<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#^Z</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>And then check again the port state:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW2#sh ip int brief
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">Vlan30                 30.30.30.2      YES manual up                    up
</span></span></code></pre></td></tr></table>
</div>
</div><p>The configuration steps for <code>SW1</code> and <code>SW3</code> are here intentionally ommitted.</p>
<h2 id="connectivity">Connectivity</h2>
<h3 id="ping-between-pcs">Ping between PCs</h3>
<p>Now let&rsquo;s check the connectivity between the posts:</p>
<ul>
<li><code>PC1</code> -&gt; <code>PC2</code>:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">PC&gt;ping 10.10.10.102
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Pinging 10.10.10.102 with <span class="m">32</span> bytes of data:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Reply from 10.10.10.102: <span class="nv">bytes</span><span class="o">=</span><span class="m">32</span> <span class="nv">time</span><span class="o">=</span>1ms <span class="nv">TTL</span><span class="o">=</span><span class="m">128</span>
</span></span><span class="line"><span class="cl">Reply from 10.10.10.102: <span class="nv">bytes</span><span class="o">=</span><span class="m">32</span> <span class="nv">time</span><span class="o">=</span>0ms <span class="nv">TTL</span><span class="o">=</span><span class="m">128</span>
</span></span><span class="line"><span class="cl">Reply from 10.10.10.102: <span class="nv">bytes</span><span class="o">=</span><span class="m">32</span> <span class="nv">time</span><span class="o">=</span>0ms <span class="nv">TTL</span><span class="o">=</span><span class="m">128</span>
</span></span><span class="line"><span class="cl">Reply from 10.10.10.102: <span class="nv">bytes</span><span class="o">=</span><span class="m">32</span> <span class="nv">time</span><span class="o">=</span>0ms <span class="nv">TTL</span><span class="o">=</span><span class="m">128</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Ping statistics <span class="k">for</span> 10.10.10.102:
</span></span><span class="line"><span class="cl">    Packets: <span class="nv">Sent</span> <span class="o">=</span> 4, <span class="nv">Received</span> <span class="o">=</span> 4, <span class="nv">Lost</span> <span class="o">=</span> <span class="m">0</span> <span class="o">(</span>0% loss<span class="o">)</span>,
</span></span><span class="line"><span class="cl">Approximate round trip <span class="nb">times</span> in milli-seconds:
</span></span><span class="line"><span class="cl">    <span class="nv">Minimum</span> <span class="o">=</span> 0ms, <span class="nv">Maximum</span> <span class="o">=</span> 1ms, <span class="nv">Average</span> <span class="o">=</span> 0ms
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>PC1</code> -&gt; <code>PC5</code>:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">PC&gt;ping 10.10.10.105
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Pinging 10.10.10.105 with <span class="m">32</span> bytes of data:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Reply from 10.10.10.105: <span class="nv">bytes</span><span class="o">=</span><span class="m">32</span> <span class="nv">time</span><span class="o">=</span>1ms <span class="nv">TTL</span><span class="o">=</span><span class="m">128</span>
</span></span><span class="line"><span class="cl">Reply from 10.10.10.105: <span class="nv">bytes</span><span class="o">=</span><span class="m">32</span> <span class="nv">time</span><span class="o">=</span>0ms <span class="nv">TTL</span><span class="o">=</span><span class="m">128</span>
</span></span><span class="line"><span class="cl">Reply from 10.10.10.105: <span class="nv">bytes</span><span class="o">=</span><span class="m">32</span> <span class="nv">time</span><span class="o">=</span>0ms <span class="nv">TTL</span><span class="o">=</span><span class="m">128</span>
</span></span><span class="line"><span class="cl">Reply from 10.10.10.105: <span class="nv">bytes</span><span class="o">=</span><span class="m">32</span> <span class="nv">time</span><span class="o">=</span>0ms <span class="nv">TTL</span><span class="o">=</span><span class="m">128</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Ping statistics <span class="k">for</span> 10.10.10.105:
</span></span><span class="line"><span class="cl">    Packets: <span class="nv">Sent</span> <span class="o">=</span> 4, <span class="nv">Received</span> <span class="o">=</span> 4, <span class="nv">Lost</span> <span class="o">=</span> <span class="m">0</span> <span class="o">(</span>0% loss<span class="o">)</span>,
</span></span><span class="line"><span class="cl">Approximate round trip <span class="nb">times</span> in milli-seconds:
</span></span><span class="line"><span class="cl">    <span class="nv">Minimum</span> <span class="o">=</span> 0ms, <span class="nv">Maximum</span> <span class="o">=</span> 1ms, <span class="nv">Average</span> <span class="o">=</span> 0ms
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>PC4</code> -&gt; <code>PC6</code>:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">PC&gt;ping 20.20.20.106
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Pinging 20.20.20.106 with <span class="m">32</span> bytes of data:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Reply from 20.20.20.106: <span class="nv">bytes</span><span class="o">=</span><span class="m">32</span> <span class="nv">time</span><span class="o">=</span>0ms <span class="nv">TTL</span><span class="o">=</span><span class="m">128</span>
</span></span><span class="line"><span class="cl">Reply from 20.20.20.106: <span class="nv">bytes</span><span class="o">=</span><span class="m">32</span> <span class="nv">time</span><span class="o">=</span>0ms <span class="nv">TTL</span><span class="o">=</span><span class="m">128</span>
</span></span><span class="line"><span class="cl">Reply from 20.20.20.106: <span class="nv">bytes</span><span class="o">=</span><span class="m">32</span> <span class="nv">time</span><span class="o">=</span>0ms <span class="nv">TTL</span><span class="o">=</span><span class="m">128</span>
</span></span><span class="line"><span class="cl">Reply from 20.20.20.106: <span class="nv">bytes</span><span class="o">=</span><span class="m">32</span> <span class="nv">time</span><span class="o">=</span>0ms <span class="nv">TTL</span><span class="o">=</span><span class="m">128</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Ping statistics <span class="k">for</span> 20.20.20.106:
</span></span><span class="line"><span class="cl">    Packets: <span class="nv">Sent</span> <span class="o">=</span> 4, <span class="nv">Received</span> <span class="o">=</span> 4, <span class="nv">Lost</span> <span class="o">=</span> <span class="m">0</span> <span class="o">(</span>0% loss<span class="o">)</span>,
</span></span><span class="line"><span class="cl">Approximate round trip <span class="nb">times</span> in milli-seconds:
</span></span><span class="line"><span class="cl">    <span class="nv">Minimum</span> <span class="o">=</span> 0ms, <span class="nv">Maximum</span> <span class="o">=</span> 0ms, <span class="nv">Average</span> <span class="o">=</span> 0ms
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ping-between-switches">Ping between Switches</h3>
<ul>
<li><code>SW3</code> -&gt; <code>SW1</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW3#ping 30.30.30.1
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Type escape sequence to abort.
</span></span><span class="line"><span class="cl">Sending 5, 100-byte ICMP Echos to 30.30.30.1, timeout is <span class="m">2</span> seconds:
</span></span><span class="line"><span class="cl">..!!!
</span></span><span class="line"><span class="cl">Success rate is <span class="m">60</span> percent <span class="o">(</span>3/5<span class="o">)</span>, round-trip min/avg/max <span class="o">=</span> 0/0/0 ms
</span></span></code></pre></td></tr></table>
</div>
</div><p>The first 2 ICMP Echo Requests were not successful because <code>SW3</code> and <code>SW2</code> didn&rsquo;t have yet the MAC address of <code>SW1</code>. The 2nd ping command will therefore have 100% connectivity rate since the MAC address table has been updated:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW3#ping 30.30.30.1
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Type escape sequence to abort.
</span></span><span class="line"><span class="cl">Sending 5, 100-byte ICMP Echos to 30.30.30.1, timeout is <span class="m">2</span> seconds:
</span></span><span class="line"><span class="cl">!!!!!
</span></span><span class="line"><span class="cl">Success rate is <span class="m">100</span> percent <span class="o">(</span>5/5<span class="o">)</span>, round-trip min/avg/max <span class="o">=</span> 0/1/6 ms
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ssh">SSH</h3>
<ul>
<li><code>SW1</code> -&gt; <code>SW2</code>:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW1#ssh -l admin -v <span class="m">2</span> 30.30.30.2
</span></span><span class="line"><span class="cl">Open
</span></span><span class="line"><span class="cl">Password: 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">SW2&gt;enable
</span></span><span class="line"><span class="cl">Password: 
</span></span><span class="line"><span class="cl">SW2#exit
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>Connection to 30.30.30.2 closed by foreign host<span class="o">]</span>
</span></span><span class="line"><span class="cl">SW1#
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="mac-address-tables">MAC address tables</h3>
<p>Now that we have pinged the hosts, the switches should now have all MAC addresses in their tables:</p>
<ul>
<li><code>SW2</code>:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW2#show mac address-table 
</span></span><span class="line"><span class="cl">          Mac Address Table
</span></span><span class="line"><span class="cl">-------------------------------------------
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Vlan    Mac Address       Type        Ports
</span></span><span class="line"><span class="cl">----    -----------       --------    -----
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="m">1</span>    0030.a341.e901    DYNAMIC     Fa0/2
</span></span><span class="line"><span class="cl">   <span class="m">1</span>    0090.211e.2e01    DYNAMIC     Fa0/1
</span></span><span class="line"><span class="cl">  <span class="m">10</span>    0001.437b.a40c    DYNAMIC     Fa0/2
</span></span><span class="line"><span class="cl">  <span class="m">10</span>    0030.a341.e901    DYNAMIC     Fa0/2
</span></span><span class="line"><span class="cl">  <span class="m">10</span>    0030.f28c.c65a    DYNAMIC     Fa0/1
</span></span><span class="line"><span class="cl">  <span class="m">20</span>    0030.a319.da0b    DYNAMIC     Fa0/4
</span></span><span class="line"><span class="cl">  <span class="m">20</span>    0030.a341.e901    DYNAMIC     Fa0/2
</span></span><span class="line"><span class="cl">  <span class="m">20</span>    0060.7079.8692    DYNAMIC     Fa0/2
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="security">Security</h2>
<h3 id="port-security">Port security</h3>
<p>Now suppose <code>SW1</code> should implement <strong>port security</strong> and therefore allow only <strong>pre-defined</strong> devices to connect to the switch. This will prevent devices which MAC addresses is not included in the whitelist from sending frames through <code>SW1</code>. The next commands will configure port security for ports <strong>F0/2</strong> (PC1) and <strong>F0/3</strong> (PC2):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW1#conf t
</span></span><span class="line"><span class="cl">Enter configuration commands, one per line.  End with CNTL/Z.
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config<span class="o">)</span><span class="c1">#int f0/2</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#switchport port-security </span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#switchport port-security mac-address 0030.f28c.c65a</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#exit</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config<span class="o">)</span><span class="c1">#int f0/3</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#switchport port-security </span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#switchport port-security mac-address 0060.2fd2.a80a</span>
</span></span><span class="line"><span class="cl">SW1<span class="o">(</span>config-if<span class="o">)</span><span class="c1">#exit</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Check the configuration:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.bash" data-lang=".bash"><span class="line"><span class="cl">SW1#sh port-security int f0/2
</span></span><span class="line"><span class="cl">Port Security              : Enabled
</span></span><span class="line"><span class="cl">Port Status                : Secure-up
</span></span><span class="line"><span class="cl">Violation Mode             : Shutdown
</span></span><span class="line"><span class="cl">Aging Time                 : <span class="m">0</span> mins
</span></span><span class="line"><span class="cl">Aging Type                 : Absolute
</span></span><span class="line"><span class="cl">SecureStatic Address Aging : Disabled
</span></span><span class="line"><span class="cl">Maximum MAC Addresses      : <span class="m">1</span>
</span></span><span class="line"><span class="cl">Total MAC Addresses        : <span class="m">1</span>
</span></span><span class="line"><span class="cl">Configured MAC Addresses   : <span class="m">1</span>
</span></span><span class="line"><span class="cl">Sticky MAC Addresses       : <span class="m">0</span>
</span></span><span class="line"><span class="cl">Last Source Address:Vlan   : 0030.F28C.C65A:10
</span></span><span class="line"><span class="cl">Security Violation Count   : <span class="m">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">SW1#sh port-security int f0/3
</span></span><span class="line"><span class="cl">Port Security              : Enabled
</span></span><span class="line"><span class="cl">Port Status                : Secure-up
</span></span><span class="line"><span class="cl">Violation Mode             : Shutdown
</span></span><span class="line"><span class="cl">Aging Time                 : <span class="m">0</span> mins
</span></span><span class="line"><span class="cl">Aging Type                 : Absolute
</span></span><span class="line"><span class="cl">SecureStatic Address Aging : Disabled
</span></span><span class="line"><span class="cl">Maximum MAC Addresses      : <span class="m">1</span>
</span></span><span class="line"><span class="cl">Total MAC Addresses        : <span class="m">1</span>
</span></span><span class="line"><span class="cl">Configured MAC Addresses   : <span class="m">0</span>
</span></span><span class="line"><span class="cl">Sticky MAC Addresses       : <span class="m">0</span>
</span></span><span class="line"><span class="cl">Last Source Address:Vlan   : 0060.2FD2.A80A:10
</span></span><span class="line"><span class="cl">Security Violation Count   : <span class="m">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div>
    

  </div>
  <div id="comments">
      
<div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "dorneanu" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

  </div>
</main>
 






<div class="tl fixed list-pages lh-copy" id="contents-list"></div>



<div class="pagination tc tr-l db fixed-l bottom-2-l right-2-l mb3 mb0-l">
  
<a id="scroll-to-top" class="f6 o-0 link br2 ph2 pv1 mb1 bg-main-color pointer" onclick="topFunction()" style="color: #fff; visibility: hidden; display: none; transition: opacity .5s, visibility .5s;" title="back to top">back to top</a>
<br>
  <p class="mb0 mt2">
  <a href="https://blog.dornea.nu/2015/10/02/manage-pki-using-openssl/">prev</a>
  <a href="https://blog.dornea.nu/2015/11/06/advanced-inter-vlan-switching-using-cisco/">next</a>
  </p>
</div>

  <footer class="content-width mt0 mt5-l mb4 f6 center ph3 gray tc tl-l">
  <hr class="dn db-l ml0-l gray w3"><br>
  Powered by <a href="https://gohugo.io/" target="_blank" class="link gray dim">Hugo</a>, based on the <a href="https://github.com/lingxz/er" target="_blank" class="link gray dim">Er</a> theme.
  2009-2022 Victor Dorneanu - All rights reserved
  <a href="https://blog.dornea.nu/feed.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a>
</footer>

  



<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
<style>.is-active-link::before { background-color: var(--secondary-color); }</style>




<script type="text/javascript">
var prevScrollpos = window.pageYOffset;
window.onscroll = function() {
  var currentScrollPos = window.pageYOffset;

  
  if (document.getElementById("tag-cloud") !== null) { 
    if (prevScrollpos > currentScrollPos) { 
      document.getElementById("tag-cloud").style.visibility = "visible";
      document.getElementById("tag-cloud").style.opacity = "1";
    } else {
      document.getElementById("tag-cloud").style.visibility = "hidden";
      document.getElementById("tag-cloud").style.opacity = "0";
    }
  }
  

  
  if (document.body.scrollTop > 1000 || document.documentElement.scrollTop > 1000) {
      document.getElementById("scroll-to-top").style.display = "inline";
      document.getElementById("scroll-to-top").style.visibility = "visible";
      document.getElementById("scroll-to-top").style.opacity = "1";
  } else {
      document.getElementById("scroll-to-top").style.visibility = "hidden";
      document.getElementById("scroll-to-top").style.opacity = "0";
  }
  
  prevScrollpos = currentScrollPos;
}


function topFunction() {
  document.body.scrollTop = 0; 
  document.documentElement.scrollTop = 0; 
}






if (document.getElementById("contents-list") !== null && document.getElementsByClassName("post-content").length !== 0) { 
  tocbot.init({
    
    tocSelector: '#contents-list',
    
    contentSelector: '.post-content',
    
    headingSelector: 'h1, h2, h3',
  });
}


</script>





<script>
 var glightbox = GLightbox({
     selector: '.glightbox'
 });
</script>

  
</body>
</html>
